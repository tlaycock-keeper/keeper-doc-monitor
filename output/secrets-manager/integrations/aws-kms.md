[![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fp7my2BdDymT53qZmRrq5%252FKeeper_600.png%3Falt%3Dmedia%26token%3D0a515169-d51f-4ca3-a458-f81394812492&width=260&dpr=4&quality=100&sign=ce896b6e&sv=2)![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fqe0JYUjJDoQWioecglOW%252Fkeeper-
no-
tag.png%3Falt%3Dmedia%26token%3D29dff9f6-9c7e-41f4-80a3-e879ee78667c&width=260&dpr=4&quality=100&sign=1e0a5ac8&sv=2)](https://docs.keeper.io/en/keeperpam/)

Ask or search...

`Ctrl``K`

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-manager/integrations/aws-
kms?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/aws-kms?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/aws-kms?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/aws-kms?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/aws-kms?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-manager/integrations/aws-
kms?fallback=true)[SSO Connect Cloud](https://docs.keeper.io/en/sso-connect-
cloud/secrets-manager/integrations/aws-kms?fallback=true)[KeeperPAM and
Secrets Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/aws-kms?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/aws-kms?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/aws-kms?fallback=true)

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-manager/integrations/aws-
kms?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/aws-kms?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/aws-kms?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/aws-kms?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/aws-kms?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-manager/integrations/aws-
kms?fallback=true)[SSO Connect Cloud](https://docs.keeper.io/en/sso-connect-
cloud/secrets-manager/integrations/aws-kms?fallback=true)[KeeperPAM and
Secrets Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/aws-kms?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/aws-kms?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/aws-kms?fallback=true)

  * [KeeperPAM](/en/keeperpam)
  * Privileged Access Manager

    * [Setup Steps](/en/keeperpam/privileged-access-manager/setup-steps)
    * [Quick Start: Sandbox](/en/keeperpam/privileged-access-manager/quick-start-sandbox)
    * [Getting Started](/en/keeperpam/privileged-access-manager/getting-started)

      * [Architecture](/en/keeperpam/privileged-access-manager/getting-started/architecture)

        * [Architecture Diagram](/en/keeperpam/privileged-access-manager/getting-started/architecture/system-architecture)
        * [Vault Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/vault-security)
        * [Router Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/router-security)
        * [Gateway Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/gateway-security)
        * [Connection and Tunnel Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/connection-and-tunnel-security)

      * [KeeperPAM Licensing](/en/keeperpam/privileged-access-manager/getting-started/keeperpam-licensing)
      * [Enforcement Policies](/en/keeperpam/privileged-access-manager/getting-started/enforcement-policies)
      * [Vault Structure](/en/keeperpam/privileged-access-manager/getting-started/vault-structure)
      * [Record Linking](/en/keeperpam/privileged-access-manager/getting-started/record-linking)
      * [Applications](/en/keeperpam/privileged-access-manager/getting-started/applications)
      * [Devices](/en/keeperpam/privileged-access-manager/getting-started/devices)
      * [Gateways](/en/keeperpam/privileged-access-manager/getting-started/gateways)

        * [Creating a Gateway](/en/keeperpam/privileged-access-manager/getting-started/gateways/one-time-access-token)
        * [Docker Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/docker-installation)
        * [Linux Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/linux-installation)
        * [Windows Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/windows-installation)
        * [Auto Updater](/en/keeperpam/privileged-access-manager/getting-started/gateways/auto-updater)
        * [Alerts and SIEM Integration](/en/keeperpam/privileged-access-manager/getting-started/gateways/alerts-and-siem-integration)
        * [Advanced Configuration](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration)

          * [Gateway Configuration with AWS KMS](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-aws-kms)
          * [Gateway Configuration with Custom Fields](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-custom-fields)

      * [PAM Configuration](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration)

        * [AWS Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/aws-environment-setup)
        * [Azure Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/azure-environment-setup)
        * [Local Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/local-environment-setup)

      * [PAM Resources](/en/keeperpam/privileged-access-manager/getting-started/pam-resources)

        * [PAM Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine)

          * [Example: Linux Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-linux-machine)
          * [Example: Azure Windows VM](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-azure-windows-vm)

        * [PAM Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database)

          * [Example: MySQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-mysql-database)
          * [Example: PostgreSQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-postgresql-database)
          * [Example: Microsoft SQL Server Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-microsoft-sql-server-database)

        * [PAM Directory](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-directory)
        * [PAM Remote Browser](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-remote-browser)
        * [PAM User](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-user)

      * [Sharing and Access Control](/en/keeperpam/privileged-access-manager/getting-started/sharing-and-access-control)
      * [Just-In-Time Access (JIT)](/en/keeperpam/privileged-access-manager/getting-started/just-in-time-access-jit)

    * [Password Rotation](/en/keeperpam/privileged-access-manager/password-rotation)

      * [Rotation Overview](/en/keeperpam/privileged-access-manager/password-rotation/rotation-overview)
      * [Rotation Use Cases](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases)

        * [Azure](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure)

          * [Azure AD Users](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-ad-users)
          * [Azure VM User Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-vm-user-accounts)
          * [Azure Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database)

            * [Azure SQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-sql)
            * [Azure MySQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mysql-single-or-flexible-database)
            * [Azure MariaDB Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mariadb-database)
            * [Azure PostgreSQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-postgresql-single-or-flexible-database)

          * [Azure App Secret Rotation](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-app-secret-rotation)

        * [AWS](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws)

          * [IAM User Password](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user)
          * [Managed Microsoft AD User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/directory-user)
          * [EC2 Virtual Machine User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/ec2-virtual-machine-user)
          * [IAM User Access Key](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user-access-key)
          * [Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database)

            * [AWS RDS for MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mysql)
            * [AWS RDS for SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-sql-server)
            * [AWS RDS for PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-postgresql)
            * [AWS RDS for MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mariadb)
            * [AWS RDS for Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-oracle)

        * [Local Network](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network)

          * [Active Directory or OpenLDAP User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/active-directory)
          * [Windows User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/windows-user)
          * [Linux User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/linux-user)
          * [macOS User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/macos-user)
          * [Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database)

            * [Native MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mysql)
            * [Native MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mariadb)
            * [Native PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/postgresql)
            * [Native MongoDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mongodb)
            * [Native MS SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/ms-sql-server)
            * [Native Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/oracle)

        * [SaaS Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts)

          * [Okta User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/okta-user)
          * [Snowflake User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/snowflake-user)
          * [Rotate Credential via REST API](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/rotate-credential-via-rest-api)

        * [Network Devices](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices)

          * [Cisco IOS XE](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-ios-xe)
          * [Cisco Meraki](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-meraki)

      * [Service Management](/en/keeperpam/privileged-access-manager/password-rotation/service-management)
      * [Post-Rotation Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts)

        * [Inputs and Outputs](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/parameters)
        * [Attaching Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/attaching-post-rotation-scripts-to-records)
        * [Code Examples](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/accessing-parameters)

    * [Connections](/en/keeperpam/privileged-access-manager/connections)

      * [Getting Started](/en/keeperpam/privileged-access-manager/connections/getting-started)
      * [Session Protocols](/en/keeperpam/privileged-access-manager/connections/session-protocols)

        * [SSH Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/ssh-connections)
        * [RDP Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rdp-connections)
        * [RBI Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rbi-connections)
        * [MySQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/mysql-connections)
        * [SQL Server Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/sql-server-connections)
        * [PostgreSQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/postgresql-connections)
        * [VNC Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/vnc-connections)
        * [Telnet Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/telnet-connections)

      * [Examples](/en/keeperpam/privileged-access-manager/connections/examples)

        * [SSH Protocol - Linux Machine](/en/keeperpam/privileged-access-manager/connections/examples/ssh-protocol-linux-machine)
        * [RDP Protocol - Azure Virtual Machine](/en/keeperpam/privileged-access-manager/connections/examples/rdp-protocol-azure-virtual-machine)
        * [MySQL Protocol - MySQL Database](/en/keeperpam/privileged-access-manager/connections/examples/mysql-protocol-mysql-database)
        * [PostgreSQL Protocol - PostgreSQL Database](/en/keeperpam/privileged-access-manager/connections/examples/postgresql-protocol-postgresql-database)

    * [Tunnels](/en/keeperpam/privileged-access-manager/tunnels)

      * [Setting up Tunnels](/en/keeperpam/privileged-access-manager/tunnels/setting-up-tunnels)

    * [Remote Browser Isolation](/en/keeperpam/privileged-access-manager/remote-browser-isolation)

      * [Setting up RBI](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi)

        * [URL Patterns & Resource URL Patterns](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/url-patterns-and-resource-url-patterns)
        * [Browser Autofill](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/browser-autofill)

    * [Session Recording & Playback](/en/keeperpam/privileged-access-manager/session-recording-and-playback)
    * [SSH Agent](/en/keeperpam/privileged-access-manager/ssh-agent)

      * [Integration with Git](/en/keeperpam/privileged-access-manager/ssh-agent/integration-with-git)

    * [Discovery](/en/keeperpam/privileged-access-manager/discovery)

      * [Discovery Basics](/en/keeperpam/privileged-access-manager/discovery/discovery-basics)
      * [Discovery using Commander](/en/keeperpam/privileged-access-manager/discovery/discovery-using-commander)
      * [Discovery using the Vault](/en/keeperpam/privileged-access-manager/discovery/discovery-using-the-vault)

    * [On-Prem Connection Manager](/en/keeperpam/privileged-access-manager/on-prem-connection-manager)
    * [References](/en/keeperpam/privileged-access-manager/references)

      * [Port Mapping](/en/keeperpam/privileged-access-manager/references/port-mapping)
      * [Setting up SSH](/en/keeperpam/privileged-access-manager/references/setting-up-ssh)
      * [Setting up WinRM](/en/keeperpam/privileged-access-manager/references/setting-up-winrm)
      * [Setting up SQL Server](/en/keeperpam/privileged-access-manager/references/setting-up-sql-server)
      * [Database Import and Export](/en/keeperpam/privileged-access-manager/references/database-import-and-export)
      * [Installing sqlcmd on Linux](/en/keeperpam/privileged-access-manager/references/installing-sqlcmd-on-linux)
      * [Installing Docker on Linux](/en/keeperpam/privileged-access-manager/references/installing-docker-on-linux)
      * [Creating KSM App for Rotation](/en/keeperpam/privileged-access-manager/references/creating-ksm-app-for-rotation)
      * [Active Directory Least Privilege](/en/keeperpam/privileged-access-manager/references/active-directory-least-privilege)
      * [Event Reporting](/en/keeperpam/privileged-access-manager/references/event-reporting)
      * [Importing PAM Records](/en/keeperpam/privileged-access-manager/references/importing-pam-records)
      * [Managing Rotation via CLI](/en/keeperpam/privileged-access-manager/references/managing-rotation-via-cli)
      * [Commander SDK](/en/keeperpam/privileged-access-manager/references/commander-sdk)
      * [Cron Spec](/en/keeperpam/privileged-access-manager/references/cron-spec)
      * [Preview Access](/en/keeperpam/privileged-access-manager/references/preview-access)

  * Endpoint Privilege Manager

    * [Overview](/en/keeperpam/endpoint-privilege-manager/overview)
    * [Setup](/en/keeperpam/endpoint-privilege-manager/setup)
    * [Deployment](/en/keeperpam/endpoint-privilege-manager/deployment)
    * [Policies](/en/keeperpam/endpoint-privilege-manager/policies)
    * [Managing Requests](/en/keeperpam/endpoint-privilege-manager/managing-requests)
  * [FAQs](/en/keeperpam/faqs)
  * Secrets Manager

    * [Secrets Manager Overview](/en/keeperpam/secrets-manager/overview)
    * [Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide)
    * [About KSM](/en/keeperpam/secrets-manager/about)

      * [Architecture](/en/keeperpam/secrets-manager/about/architecture)
      * [Terminology](/en/keeperpam/secrets-manager/about/terminology)
      * [Security & Encryption Model](/en/keeperpam/secrets-manager/about/security-encryption-model)
      * [One Time Access Token](/en/keeperpam/secrets-manager/about/one-time-token)
      * [Secrets Manager Configuration](/en/keeperpam/secrets-manager/about/secrets-manager-configuration)
      * [Keeper Notation](/en/keeperpam/secrets-manager/about/keeper-notation)
      * [Event Reporting](/en/keeperpam/secrets-manager/about/event-reporting)
      * [Field/Record Types](/en/keeperpam/secrets-manager/about/field-record-types)

    * [Secrets Manager CLI](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface)

      * [Profile Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/profile-command)
      * [Init Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/init-command)
      * [Secret Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/secret-command)
      * [Folder Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/folder-command)
      * [Sync Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/sync-command)
      * [Exec Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/exec-command)
      * [Config Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/config-command)
      * [Version Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/version-command)
      * [Misc Commands](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/vault-admin-commands)
      * [Docker Container](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/docker-container)
      * [Custom Record Types](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/custom-record-types)

    * [Password Rotation](/en/keeperpam/secrets-manager/password-rotation)
    * [Developer SDKs](/en/keeperpam/secrets-manager/developer-sdk-library)

      * [Python SDK](/en/keeperpam/secrets-manager/developer-sdk-library/python-sdk)
      * [Java/Kotlin SDK](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk/record-field-classes)

      * [JavaScript SDK](/en/keeperpam/secrets-manager/developer-sdk-library/javascript-sdk)
      * [.NET SDK](/en/keeperpam/secrets-manager/developer-sdk-library/.net-sdk)
      * [Go SDK](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk/record-field-classes)

      * [PowerShell](/en/keeperpam/secrets-manager/developer-sdk-library/powershell)
      * [Vault SDKs](/en/keeperpam/secrets-manager/developer-sdk-library/vault-sdks)

    * [Integrations](/en/keeperpam/secrets-manager/integrations)

      * [Ansible](/en/keeperpam/secrets-manager/integrations/ansible)

        * [Ansible Plugin](/en/keeperpam/secrets-manager/integrations/ansible/ansible-plugin)
        * [Ansible Tower](/en/keeperpam/secrets-manager/integrations/ansible/ansible-tower)

      * [AWS CLI Credential Process](/en/keeperpam/secrets-manager/integrations/aws-cli-credential-process)
      * [AWS Secrets Manager Sync](/en/keeperpam/secrets-manager/integrations/aws-secrets-manager)
      * [AWS KMS Encryption](/en/keeperpam/secrets-manager/integrations/aws-kms)
      * [Azure DevOps Extension](/en/keeperpam/secrets-manager/integrations/azure-devops-plugin)
      * [Azure Key Vault Sync](/en/keeperpam/secrets-manager/integrations/azure-key-vault)
      * [Azure Key Vault Encryption](/en/keeperpam/secrets-manager/integrations/azure-key-vault-ksm)
      * [Bitbucket Plugin](/en/keeperpam/secrets-manager/integrations/bitbucket-plugin)
      * [Docker Image](/en/keeperpam/secrets-manager/integrations/docker-image)
      * [Docker Runtime](/en/keeperpam/secrets-manager/integrations/docker-runtime)
      * [Docker Writer Image](/en/keeperpam/secrets-manager/integrations/docker-writer-image)
      * [Entrust HSM Encryption](/en/keeperpam/secrets-manager/integrations/entrust-hsm)
      * [Git - Sign Commits with SSH](/en/keeperpam/secrets-manager/integrations/git-sign-commits-with-ssh)
      * [GitHub Actions](/en/keeperpam/secrets-manager/integrations/github-actions)
      * [GitLab](/en/keeperpam/secrets-manager/integrations/gitlab-plugin)
      * [Google Cloud Secret Manager Sync](/en/keeperpam/secrets-manager/integrations/gcp-secret-manager)
      * [Google Cloud Key Management Encryption](/en/keeperpam/secrets-manager/integrations/google-cloud-key-management-encryption)
      * [Hashicorp Vault](/en/keeperpam/secrets-manager/integrations/hashicorp-vault)
      * [Heroku](/en/keeperpam/secrets-manager/integrations/heroku)
      * [Jenkins Plugin](/en/keeperpam/secrets-manager/integrations/jenkins-plugin)
      * [Keeper Connection Manager](/en/keeperpam/secrets-manager/integrations/keeper-connection-manager)
      * [Kubernetes External Secrets Operator](/en/keeperpam/secrets-manager/integrations/kubernetes-external-secrets-operator)
      * [Kubernetes (alternative)](/en/keeperpam/secrets-manager/integrations/kubernetes)
      * [Linux Keyring](/en/keeperpam/secrets-manager/integrations/linux-keyring)
      * [Octopus Deploy](/en/keeperpam/secrets-manager/integrations/octopus-deploy)
      * [Oracle Key Vault Encryption](/en/keeperpam/secrets-manager/integrations/oracle-key-vault)
      * [PowerShell Plugin](/en/keeperpam/secrets-manager/integrations/powershell-plugin)
      * [ServiceNow](/en/keeperpam/secrets-manager/integrations/servicenow)
      * [TeamCity](/en/keeperpam/secrets-manager/integrations/teamcity)
      * [Teller](/en/keeperpam/secrets-manager/integrations/teller)
      * [Terraform Plugin](/en/keeperpam/secrets-manager/integrations/terraform)

        * [Terraform Registry](https://registry.terraform.io/providers/Keeper-Security/secretsmanager/latest/docs/data-sources/address)

      * [Windows Credential Manager](/en/keeperpam/secrets-manager/integrations/windows-credential-manager)
      * [XSOAR](/en/keeperpam/secrets-manager/integrations/xsoar)

    * [Troubleshooting](/en/keeperpam/secrets-manager/troubleshooting)
  * Commander CLI

    * [Commander Overview](/en/keeperpam/commander-cli/overview)
    * [Installation and Setup](/en/keeperpam/commander-cli/commander-installation-setup)

      * [CLI Installation on Windows](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-windows)
      * [CLI Installation on macOS](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-mac)
      * [CLI Installation on Linux](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-linux)
      * [Python Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/developer-mode)
      * [.NET Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/net-developer-sdk)
      * [PowerShell Module](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-powershell)
      * [Logging in](/en/keeperpam/commander-cli/commander-installation-setup/logging-in)
      * [Configuration and Usage](/en/keeperpam/commander-cli/commander-installation-setup/configuration)

        * [AWS Secrets Manager](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-secrets-manager)
        * [AWS Key Management Service](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-key-management-service)

      * [Automating with Windows Task](/en/keeperpam/commander-cli/commander-installation-setup/automating-with-windows-task)
      * [Automating with AWS Lambda](/en/keeperpam/commander-cli/commander-installation-setup/using-commander-with-aws-lambda)
      * [Uninstallation](/en/keeperpam/commander-cli/commander-installation-setup/uninstallation)

    * [Command Reference](/en/keeperpam/commander-cli/command-reference)

      * [Import and Export Data](/en/keeperpam/commander-cli/command-reference/import-and-export-commands)

        * [Import/Export Commands](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/import-export-commands)
        * [CyberArk Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/cyberark-import)
        * [LastPass Data Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/lastpass-import)
        * [Delinea / Thycotic Secret Server Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/delinea-thycotic-secret-server-import)
        * [Keepass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/keepass-import)
        * [ManageEngine Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/manageengine-import)
        * [Myki Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/myki-import)
        * [Proton Pass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/proton-pass-import)
        * [CSV Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/csv-import)
        * [JSON Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/json-import)

      * [Reporting Commands](/en/keeperpam/commander-cli/command-reference/reporting-commands)

        * [Report Types](/en/keeperpam/commander-cli/command-reference/reporting-commands/report-types)

      * [Enterprise Management Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands)

        * [Creating and Inviting Users](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/creating-and-inviting-users)
        * [Compliance Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/compliance-commands)
        * [Breachwatch Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/breachwatch-commands)
        * [SCIM Push Configuration](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/scim-push-configuration)

      * [Record Commands](/en/keeperpam/commander-cli/command-reference/record-commands)

        * [Record Type Commands](/en/keeperpam/commander-cli/command-reference/record-commands/record-type-commands)
        * [Creating Record Types](/en/keeperpam/commander-cli/command-reference/record-commands/default-record-types)

      * [Sharing Commands](/en/keeperpam/commander-cli/command-reference/sharing-commands)
      * [KeeperPAM Commands](/en/keeperpam/commander-cli/command-reference/keeperpam-commands)
      * [Connection Commands](/en/keeperpam/commander-cli/command-reference/connection-commands)

        * [SSH](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh)
        * [SSH Agent](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh-agent)
        * [RDP](/en/keeperpam/commander-cli/command-reference/connection-commands/rdp)
        * [Connect Command](/en/keeperpam/commander-cli/command-reference/connection-commands/connection-to-hosts)
        * [SFTP Sync](/en/keeperpam/commander-cli/command-reference/connection-commands/sftp-sync)

      * [Secrets Manager Commands](/en/keeperpam/commander-cli/command-reference/secrets-manager-commands)
      * [MSP Management Commands](/en/keeperpam/commander-cli/command-reference/msp-management-commands)
      * [Miscellaneous Commands](/en/keeperpam/commander-cli/command-reference/misc-commands)
      * [Password Rotation](/en/keeperpam/commander-cli/command-reference/plugins)

        * [Password Rotation Commands](/en/keeperpam/commander-cli/command-reference/plugins/password-rotation)
        * [AWS Plugin](/en/keeperpam/commander-cli/command-reference/plugins/aws-plugin)
        * [Azure Plugin](/en/keeperpam/commander-cli/command-reference/plugins/azure-plugin)
        * [Microsoft SQL Server Plugin](/en/keeperpam/commander-cli/command-reference/plugins/microsoft-sql-server-plugin)
        * [MySQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/mysql-plugin)
        * [Oracle Plugin](/en/keeperpam/commander-cli/command-reference/plugins/oracle-plugin)
        * [PostgreSQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/postgresql-plugin)
        * [PSPasswd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/pspasswd-plugin)
        * [SSH Plugin](/en/keeperpam/commander-cli/command-reference/plugins/ssh-plugin)
        * [Unix Passwd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/unix-passwd-plugin)
        * [Windows Plugin](/en/keeperpam/commander-cli/command-reference/plugins/windows-plugin)
        * [Active Directory Plugin](/en/keeperpam/commander-cli/command-reference/plugins/active-directory-plugin)
        * [Automatic Execution](/en/keeperpam/commander-cli/command-reference/plugins/automatic-execution)

    * [Service Mode REST API](/en/keeperpam/commander-cli/service-mode-rest-api)
    * [Troubleshooting](/en/keeperpam/commander-cli/troubleshooting-commander-cli)

[Powered by
GitBook](https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=-MJXOXEifAmpyvNVL1to)

On this page

  * Features
  * Prerequisites
  * Setup
  * 1\. Install Module
  * 2\. Configure AWS Connection
  * 3\. Add AWS KMS Storage to Your Code
  * Using the AWS KMS Integration
  * Additional Options
  * Change Key
  * Decrypt Config

Was this helpful?

[Export as
PDF](/en/keeperpam/~gitbook/pdf?page=0HQV8nZUe4eH4dyBXD4q&only=yes&limit=100)

  1. [Secrets Manager](/en/keeperpam/secrets-manager)
  2. [Integrations](/en/keeperpam/secrets-manager/integrations)

# AWS KMS Encryption

Protect Secrets Manager connection details with AWS KMS

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252F-MJXOXEifAmpyvNVL1to%252Fuploads%252Fs5mJxxwsAgO65JtYFSNV%252Fksm-
aws.jpg%3Falt%3Dmedia%26token%3Dcf7a9f00-3fd7-4a74-9843-1cf65c6ade60&width=768&dpr=4&quality=100&sign=e02100f8&sv=2)

Keeper Secrets Manager integrates with AWS KMS in order to provide encryption
for Keeper Secrets Manager configuration files. With this integration, you can
protect connection details on your machine while taking advantage of Keeper's
zero-knowledge encryption of all your secret credentials.

##

Features

  * Encrypt and Decrypt your Keeper Secrets Manager configuration files with AWS KMS

  * Protect against unauthorized access to your Secrets Manager connections

  * Requires only minor changes to code for immediate protection. Works with all Keeper Secrets Manager SDK functionality

##

Prerequisites

JavaJavaScriptPython.NetGoLang

  * Supports the [Java Secrets Manager SDK](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk)

  * Requires [AWS-KMS](https://mvnrepository.com/artifact/software.amazon.awssdk/kms) and [AWS-Auth](https://mvnrepository.com/artifact/software.amazon.awssdk/auth) packages

  * Supports Java 11 and above

  * Supports the [JavaScript Secrets Manager SDK](/en/keeperpam/secrets-manager/developer-sdk-library/javascript-sdk)

  * Requires [aws-sdk/client-kms](https://www.npmjs.com/package/@aws-sdk/client-kms) package

  * Supports the [Python Secrets Manager SDK](/en/keeperpam/secrets-manager/developer-sdk-library/python-sdk)

  * Requires boto3 package

  * Supports the [.Net Secrets Manager SDK](/en/keeperpam/secrets-manager/developer-sdk-library/.net-sdk)

  * Requires [AWSSDK.KeyManagementService](https://www.nuget.org/packages/AWSSDK.KeyManagementService)

  * Supports the [GoLang Secrets Manager SDK](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk)

  * Requires [aws-sdk-v2](https://pkg.go.dev/github.com/aws/aws-sdk-go-v2)

##

Setup

###

1\. Install Module

JavaJavaScriptPython.NetGoLang

Setting up project using Gradle or Maven

**Gradle**

Copy

    
    
    repositories {
      mavenCentral()
    }
    
    dependencies {
      implementation("com.keepersecurity.secrets-manager:aws:1.0.0")
      implementation("com.keepersecurity.secrets-manager:core:17.0.0")
      implementation ("software.amazon.awssdk:kms:2.20.28")
      implementation ("software.amazon.awssdk:auth:2.20.28")
      implementation("com.fasterxml.jackson.core:jackson-databind:2.18.2")
      implementation("com.fasterxml.jackson.core:jackson-core:2.18.2")
      implementation("com.google.code.gson:gson:2.12.1")
      implementation("org.slf4j:slf4j-api:1.7.32"){
          exclude("org.slf4j:slf4j-log4j12")
      }
      implementation("ch.qos.logback:logback-classic:1.2.6")
      implementation("ch.qos.logback:logback-core:1.2.6")
      implementation("org.bouncycastle:bc-fips:1.0.2.4")
    }

**Maven**

Copy

    
    
    <!-- KMS-core -->
    <dependency>
     <groupId>com.keepersecurity.secrets-manager</groupId>
     <artifactId>aws</artifactId>
     <version>1.0.0</version>
    </dependency>
    <dependency>
     <groupId>com.keepersecurity.secrets-manager</groupId>
     <artifactId>core</artifactId>
     <version>17.0.0</version>
    </dependency>
    
    <!-- aws-kms -->
       	<dependency>
       		<groupId>software.amazon.awssdk</groupId>
       		<artifactId>kms</artifactId>
       		<version>2.20.28</version>
       	</dependency>
       		
       	<!-- aws-auth -->
       	<dependency>
       		<groupId>software.amazon.awssdk</groupId>
       		<artifactId>auth</artifactId>
       		<version>2.20.28</version>
       	</dependency>
       	
       	<!--gson -->
       	<dependency>
       	    <groupId>com.google.code.gson</groupId>
       	    <artifactId>gson</artifactId>
       	    <version>2.12.1</version>
       	</dependency>
    
       	<!--jackson-core -->
       	<dependency>
       		<groupId>com.fasterxml.jackson.core</groupId>
       		<artifactId>jackson-core</artifactId>
       		<version>2.18.2</version>
       	</dependency>
       	
       	<!--jackson-databind -->
       	<dependency>
       		<groupId>com.fasterxml.jackson.core</groupId>
       		<artifactId>jackson-core</artifactId>
       		<version>2.18.2</version>
       	</dependency>
       	
       	<!-- slf4j-api -->
       	<dependency>
       		<groupId>org.slf4j</groupId>
       		<artifactId>slf4j-api</artifactId>
       		<version>1.7.32</version>
       		<scope>runtime</scope>
       	</dependency>
    
       	<!-- logback-classic -->
       	<dependency>
       		<groupId>ch.qos.logback</groupId>
       		<artifactId>logback-classic</artifactId>
       		<version>1.2.6</version>
       		<scope>compile</scope>
       	</dependency>
    
       	<!-- logback-core -->
       	<dependency>
       		<groupId>ch.qos.logback</groupId>
       		<artifactId>logback-core</artifactId>
       		<version>1.2.6</version>
       		<scope>compile</scope>
       	</dependency>
       	
       	<!-- bc-fips -->
       	<dependency>
       		<groupId>org.bouncycastle</groupId>
       		<artifactId>bc-fips</artifactId>
       		<version>1.0.2.4</version>
       	</dependency>
       	

The Secrets Manager AWS Key Management Service Integration can be installed
using npm

Copy

    
    
    npm install @keeper-security/secrets-manager-aws

The Secrets Manager HSM modules are located in the Keeper Secrets Manager
storage module which can be installed using pip

Copy

    
    
    pip3 install keeper-secrets-manager-storage

boto3 is a prerequisite for the AWS KSM integration. Install it to your
machine using pip.

Copy

    
    
    pip install boto3

The Secrets Manager AWS Key Management Service Integration can be installed
using

Copy

    
    
    dotnet add package Keeper.SecretsManager.AWSKeyManagement

The Secrets Manager AWS Key Management Service Integration can be installed
using

Copy

    
    
    go get github.com/keeper-security/secrets-manager-go/integrations/aws

###

2\. Configure AWS Connection

By default the boto3 library will utilize the default connection session setup
with the AWS CLI with the `aws configure` command. If you would like to
specify the connection details, the two configuration files located at
`~/.aws/config` and `~/.aws/credentials` can be manually edited.

See the AWS documentation for more information on setting up an AWS session:
<https://docs.aws.amazon.com/cli/latest/reference/configure/>[](https://docs.aws.amazon.com/cli/latest/reference/configure/)

Alternatively, configuration variables can be provided explicitly as an access
key using the `AwsSessionConfig` data class and providing `aws_access_key_id`
, `aws_secret_access_key` and `aws_session_token` variables.

You will need an AWS Access Key to use the AWS KMS integration.

For more information on AWS Access Keys see the AWS documentation:
<https://aws.amazon.com/premiumsupport/knowledge-center/create-access-
key/>[](https://aws.amazon.com/premiumsupport/knowledge-center/create-access-
key/)

###

3\. Add AWS KMS Storage to Your Code

Once AWS connection has been configured, You can fetch the Key to encrypt /
decrypt KSM configuration using integration and you need to tell the Secrets
Manager SDK to utilize the KMS as storage. **Using Specified Connection
credentials**

JavaJavaScriptPython.NetGo

To do this, use `AwsKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, AwsSessionConfig, as well as the name
of the Secrets Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    import org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider;
    import com.keepersecurity.secretmanager.aws.kms.AwsKeyValueStorage;
    import com.keepersecurity.secretmanager.aws.kms.AwsSessionConfig;
    import com.keepersecurity.secretsManager.core.InMemoryStorage;
    import com.keepersecurity.secretsManager.core.SecretsManager;
    import com.keepersecurity.secretsManager.core.SecretsManagerOptions;
    import static com.keepersecurity.secretsManager.core.SecretsManager.initializeStorage;
    
    import software.amazon.awssdk.regions.Region;
    
    import java.security.Security;
    import org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider;
    
    class Test {
    	public static void main(String args[]){
    		String keyId = "<Key ID>";
    		String awsAccessKeyId = "<AWS Access ID>";
    		String awsSecretAccessKey = "<AWS Secret>";
    		String oneTimeToken = "[One Time Token]";
    		Region region = Region.<cloud-region>;
    		String profile = null OR "DEFAULT";     //set profile (ex. DEFUALT/UAT/PROD) if ~/.aws/config is set
    		String configFileLocation = "client_config_test.json";
    		try{
    			//set AWS configuration, It can be null if profile is set for aws credentials
    			AwsSessionConfig sessionConfig = new AwsSessionConfig(awsAccessKeyId, awsSecretAccessKey);
    			//Get Storage 
    			AwsKeyValueStorage awskvstorage =  new AwsKeyValueStorage(keyId, configFileLocation, profile, null, region);
    			initializeStorage(awskvstorage, oneTimeToken);
    			SecretsManagerOptions options = new SecretsManagerOptions(awskvstorage);
    			//getSecrets(OPTIONS);
    		}catch (Exception e) {
    			System.out.println(e.getMessage());
    		}
    	}
    }
    

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, AWS Session credentials -
`AWSSessionConfig` , as well as the name of the Secrets Manager configuration
file which will be encrypted by AWS KMS.

Copy

    
    
    import { AWSKeyValueStorage, AWSSessionConfig, LoggerLogLevelOptions } from "@keeper-security/secrets-manager-aws";
    import { initializeStorage, getSecrets } from "@keeper-security/secrets-manager-core";
    
    
    const getKeeperRecordsAWS = async () => {
    
    	const accessKeyId = "<YOUR AWS ACCESS KEY>>";
    	const secretAccessKey = "<YOUR AWS SECRET_ACCESS_KEY>";
    	const regionName = "<YOUR AWS REGION>";
    	const logLevel = LoggerLogLevelOptions.Debug;
    	const configPath = "client-config-path.json";
    	
    	const awsSessionConfig = new AWSSessionConfig(accessKeyId, secretAccessKey, regionName);
    	const keyId = 'arn:aws:kms:ap-south-1:<accountName>:key/<keyId>';
    	const storage = await new AWSKeyValueStorage(keyId, configPath, awsSessionConfig, logLevel).init();
    	
    	const oneTimeToken = "<one time token>";
    
    	await initializeStorage(storage, oneTimeToken);
    	const { records } = await getSecrets({ storage: storage });
    
    	const firstRecord = records[0]
    	const firstRecordPassword = firstRecord.data.fields.find(x => x.type === 'password')
    	console.log(firstRecordPassword.value[0])
    };
    getKeeperRecordsAWS();
    

To do this, use `AwsKmsKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, AwsSessionConfig, as well as the name
of the Secrets Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    from keeper_secrets_manager_core import SecretsManager
    from keeper_secrets_manager_hsm.storage_aws_kms import AwsKmsKeyValueStorage
     
    aws_session_cfg = AwsSessionConfig(
        aws_access_key_id="AK[...]FIF",
        aws_secret_access_key="/[...]/g3",
        region_name="us-east-2")
    
    config = AwsKmsKeyValueStorage(
       key_id='e9[...]567',
       config_file_location='client-config.json',
       aws_session_config=aws_session_cfg)
     
    secrets_manager = SecretsManager(config=config, verify_ssl_certs=True)
    all_records = secrets_manager.get_secrets()

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, AwsSessionConfig, as well as the name
of the Secrets Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    using System;
    using System.Linq;
    using System.Threading.Tasks;
    using SecretsManager;
    using AWSKeyManagement;
    
    public class Program
    {
    	private static async Task getOneIndividualSecret()
    	{
    		var accessKeyId = "<ACCESS_KEY_ID>";
    		var secretAccessKey = "<SECRET_ACCESS_KEY>";
    		var regionName = "<AWS_REGION_STRING";
    
    		var keyId = "<KEY_ID_1>";
    		var path = "<KEEPER_CONFIG_FILE_PATH>";
    		var dotnet_access_token = "<ONE_TIME_TOKEN>";
    
    		var awsSessionConfig = new AWSSessionConfig(accessKeyId, secretAccessKey, regionName);
    
    		var aws_storage = new AWSKeyValueStorage(keyId, path, awsSessionConfig);
    
    		SecretsManagerClient.InitializeStorage(aws_storage, dotnet_access_token);
    
    		var options = new SecretsManagerOptions(aws_storage);
    		var records_1 = await SecretsManagerClient.GetSecrets(options);
    		records_1.Records.ToList().ForEach(record => Console.WriteLine(record.RecordUid + " - " + record.Data.title));
    	}
    
    	static async Task Main()
    	{
    		await getOneIndividualSecret();
    	}
    }

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, AwsSessionConfig, as well as the name
of the Secrets Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    package main
    
    import (
    	"encoding/json"
    	"fmt"
    
    	"github.com/keeper-security/secrets-manager-go/core"
    	awskv "github.com/keeper-security/secrets-manager-go/integrations/aws"
    )
    
    func main() {
    
    	clientID := "<Some Client ID>"
    	clientSecret := "<Some Client Secret>"
    	region := "<Cloud Region>"
    	keyARN := "arn:<partition>:kms:<region>:<account-id>:key/<key-id>"
    	oneTimeToken := "one time token"
    	ksmConfigFileName := ""
    
    	// Initialize the AWS Key Vault Storage
    	cfg := awskv.NewAWSKeyValueStorage(ksmConfigFileName, keyARN, &awskv.AWSConfig{
    		ClientID:     clientID,
    		ClientSecret: clientSecret,
    		Region:       region,
    	})
    
    	clientOptions := &core.ClientOptions{
    		Token:  oneTimeToken,
    		Config: cfg,
    	}
    
    	fmt.Printf("Client ID in config: %v\n", cfg.Get(core.KEY_CLIENT_ID))
    
    	secrets_manager := core.NewSecretsManager(clientOptions)
    	// Fetch secrets from Keeper Security Vault
    	record_uids := []string{}
    	records, err := secrets_manager.GetSecrets(record_uids)
    	if err != nil {
    		// do something
    		fmt.Printf("Error while fetching secrets: %v", err)
    	}
    
    	for _, record := range records {
    		// do something with record
    		fmt.Println(record.Title())
    	}
    
    }

**Using Default Connection**

JavaJavaScriptPython.NetGoLang

To do this, use `AwsKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, as well as the name of the Secrets
Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    import org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider;
    import com.keepersecurity.secretmanager.aws.kms.AwsKeyValueStorage;
    import com.keepersecurity.secretmanager.aws.kms.AwsSessionConfig;
    import com.keepersecurity.secretsManager.core.InMemoryStorage;
    import com.keepersecurity.secretsManager.core.SecretsManager;
    import com.keepersecurity.secretsManager.core.SecretsManagerOptions;
    import static com.keepersecurity.secretsManager.core.SecretsManager.initializeStorage;
    
    import software.amazon.awssdk.regions.Region;
    
    import java.security.Security;
    import org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider;
    
    class Test {
    	public static void main(String args[]){
    		String keyId = "<Key ID>";
    		String awsAccessKeyId = "<AWS Access ID>";
    		String awsSecretAccessKey = "<AWS Secret>";
    		String oneTimeToken = "[One Time Token]";
    		Region region = Region.<cloud-region>;
    		String profile = null OR "DEFAULT";     //set profile (ex. DEFUALT/UAT/PROD) if ~/.aws/config is set
    		String configFileLocation = "client_config_test.json";
    		try{
    			//set AWS configuration, It can be null if profile is set for aws credentials
    			AwsSessionConfig sessionConfig = new AwsSessionConfig(awsAccessKeyId, awsSecretAccessKey);
    			//Get Storage 
    			AwsKeyValueStorage awskvstorage =  new AwsKeyValueStorage(keyId, configFileLocation, profile, sessionConfig, region);
    			initializeStorage(awskvstorage, oneTimeToken);
    			SecretsManagerOptions options = new SecretsManagerOptions(awskvstorage);
    			//getSecrets(OPTIONS);
    		}catch (Exception e) {
    			System.out.println(e.getMessage());
    		}
    	}
    }
    

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID , as well as the name of the Secrets
Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    import { AWSKeyValueStorage } from "@keeper-security/secrets-manager-aws";
    import { initializeStorage, getSecrets } from "@keeper-security/secrets-manager-core";
    
    
    const getKeeperRecordsAWS = async () => {
    
    	const configPath = "client-config-path.json";
    	
    	const keyId = 'arn:aws:kms:ap-south-1:<accountName>:key/<keyId>';
    	const storage = await new AWSKeyValueStorage(keyId, configPath).init();
    	
    	const oneTimeToken = "<one time token>";
    
    	await initializeStorage(storage, oneTimeToken);
    	const { records } = await getSecrets({ storage: storage });
    
    	const firstRecord = records[0]
    	const firstRecordPassword = firstRecord.data.fields.find(x => x.type === 'password')
    	console.log(firstRecordPassword.value[0])
    };
    getKeeperRecordsAWS();
    

To do this, use `AwsKmsKeyvalueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, as well as the name of the Secrets
Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    from keeper_secrets_manager_core import SecretsManager
    from keeper_secrets_manager_hsm.storage_aws_kms import AwsKmsKeyValueStorage
    
    key_id = 'c5[...]576'
        
    config = AwsKmsKeyValueStorage(key_id, 'client-config.json') # default session
     
    secrets_manager = SecretsManager(config=config, verify_ssl_certs=True)
    all_records = secrets_manager.get_secrets()
    

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, as well as the name of the Secrets
Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    using System;
    using System.Linq;
    using System.Threading.Tasks;
    using SecretsManager;
    using AWSKeyManagement;
    
    public class Program
    {
    	private static async Task getOneIndividualSecret()
    	{
    		var keyId = "<KEY_ID_1>";
    		var path = "<KEEPER_CONFIG_FILE_PATH>";
    		var dotnet_access_token = "<ONE_TIME_TOKEN>";
    
    		var aws_storage = new AWSKeyValueStorage(keyId, path);
    
    		SecretsManagerClient.InitializeStorage(aws_storage, dotnet_access_token);
    
    		var options = new SecretsManagerOptions(aws_storage);
    		var records_1 = await SecretsManagerClient.GetSecrets(options);
    		records_1.Records.ToList().ForEach(record => Console.WriteLine(record.RecordUid + " - " + record.Data.title));
    	}
    
    	static async Task Main()
    	{
    		await getOneIndividualSecret();
    	}
    }

To do this, use `AWSKeyValueStorage` as your Secrets Manager storage in the
`SecretsManager` constructor.

The storage will require an AWS Key ID, as well as the name of the Secrets
Manager configuration file which will be encrypted by AWS KMS.

Copy

    
    
    package main
    
    import (
    	"fmt"
    
    	"github.com/keeper-security/secrets-manager-go/core"
    	awskv "github.com/keeper-security/secrets-manager-go/integrations/aws"
    )
    
    func main() {
    
    	keyARN := "arn:<partition>:kms:<region>:<account-id>:key/<key-id>"
    	oneTimeToken := "one time token"
    	ksmConfigFileName := "<config file name>"
    
    	// Initialize the AWS Key Vault Storage
    	cfg := awskv.NewAWSKeyValueStorage(ksmConfigFileName, keyARN, nil)
    
    	clientOptions := &core.ClientOptions{
    		Token:  oneTimeToken,
    		Config: cfg,
    	}
    
    	fmt.Printf("Client ID in config: %v\n", cfg.Get(core.KEY_CLIENT_ID))
    
    	secrets_manager := core.NewSecretsManager(clientOptions)
    	// Fetch secrets from Keeper Security Vault
    	record_uids := []string{}
    	records, err := secrets_manager.GetSecrets(record_uids)
    	if err != nil {
    		// do something
    		fmt.Printf("Error while fetching secrets: %v", err)
    	}
    
    	for _, record := range records {
    		// do something with record
    		fmt.Println(record.Title())
    	}
    
    }
    

##

Using the AWS KMS Integration

Once setup, the Secrets Manager AWS KMS integration supports all Secrets
Manager SDK functionality. Your code will need to be able to access the AWS
KMS APIs in order to manage the decryption of the configuration file when run.

##

Additional Options

###

Change Key

We can change key that is used for encrypting the configuration, examples
below show the code needed to use it

JavaJavaScriptPython.NetGoLang

Copy

    
    
    String newkeyId = "<New-Key-ID>";
    AwsKeyValueStorage awskvstorage =  new AwsKeyValueStorage(keyId, configFileLocation, profile, sessionConfig, region);
    awskvstorage.changeKey(newkeyId)

Copy

    
    
    const storage = await new AWSKeyValueStorage(keyId,config_path).init()
    await initializeStorage(storage, oneTimeToken);
    
    // do all process needed if any or change directly
    await storage.changeKey(keyId2);

Copy

    
    
    from keeper_secrets_manager_core import SecretsManager
    from keeper_secrets_manager_hsm.storage_aws_kms import AwsKmsKeyValueStorage
     
    aws_session_cfg = AwsSessionConfig(
        aws_access_key_id="AK[...]FIF",
        aws_secret_access_key="/[...]/g3",
        region_name="<region>")
    
    new_key_id = "<new_key_id>"
    config = AwsKmsKeyValueStorage(
       key_id='e9[...]567',
       config_file_location='client-config.json',
       aws_session_config=aws_session_cfg)
     
    secrets_manager = SecretsManager(config=config, verify_ssl_certs=True)
    all_records = secrets_manager.change_key(new_key_id)

Copy

    
    
        using Microsoft.Extensions.Logging;
    
        var awsSessionConfig2 = new AWSSessionConfig();
        var loggerFactory = LoggerFactory.Create(builder =>
            {
                builder.SetMinimumLevel(LogLevel.Debug);
                builder.AddConsole();
            });
    
        var logger = loggerFactory.CreateLogger<AWSKeyValueStorage>();
    
        var aws_storage = new AWSKeyValueStorage(keyId, path, awsSessionConfig2,logger);

Copy

    
    
    updatedKeyARN := "arn:<partition>:kms:<region>:<account-id>:key/<key-id>"
    isChanged, err := cfg.ChangeKey(updatedKeyARN, nil)
    if err != nil {
        fmt.Printf("Error while changing key: %v", err)
    }

###

Decrypt Config

We can decrypt the config if current implementation is to be migrated onto a
different cloud or if you want your raw credentials back. The function accepts
a boolean which when set to true will save the decrypted configuration to file
and if left false, will just return decrypted configuration.

JavaJavaScriptPython.NetGoLang

Copy

    
    
    AwsKeyValueStorage awskvstorage =  new AwsKeyValueStorage(keyId, configFileLocation, profile, sessionConfig, region);
    awskvstorage.decryptConfig(true) // Set true as a parameter to extract plaintext and save config as a plaintext.
    //OR 
    awskvstorage.decryptConfig(false); // Set false as a parameter to extract only plaintext.

Copy

    
    
    const storage = await new AWSKeyValueStorage(keyId,config_path).init();
    await storage.decryptConfig(); 

Copy

    
    
    from keeper_secrets_manager_core import SecretsManager
    from keeper_secrets_manager_hsm.storage_aws_kms import AwsKmsKeyValueStorage
     
    aws_session_cfg = AwsSessionConfig(
        aws_access_key_id="AK[...]FIF",
        aws_secret_access_key="/[...]/g3",
        region_name="<region>")
    
    config = AwsKmsKeyValueStorage(
       key_id='e9[...]567',
       config_file_location='client-config.json',
       aws_session_config=aws_session_cfg)
     
    secrets_manager = SecretsManager(config=config, verify_ssl_certs=True)
    all_records = secrets_manager.decrypt_config(True)

Copy

    
    
    var conf = await aws_storage.DecryptConfigAsync(false);
    Console.WriteLine(conf);   

Copy

    
    
    cfg := awskv.NewAWSKeyValueStorage(ksmConfigFileName, keyARN, &awskv.AWSConfig{
    		ClientID:     clientID,
    		ClientSecret: clientSecret,
    		Region:       region,
    	})
    decryptedConfig, err := cfg.DecryptConfig(true)

You're ready to use the KSM integration 👍

Check out the [KSM SDKs documentation](/en/keeperpam/secrets-
manager/developer-sdk-library) for more examples and functionality

[PreviousAWS Secrets Manager Sync](/en/keeperpam/secrets-
manager/integrations/aws-secrets-manager)[NextAzure DevOps
Extension](/en/keeperpam/secrets-manager/integrations/azure-devops-plugin)

Last updated 14 days ago

Was this helpful?

#### Company

  * [Keeper Home](https://www.keepersecurity.com/)
  * [About Us](https://www.keepersecurity.com/about.html)
  * [Careers](https://www.keepersecurity.com/jobs.html)
  * [Security](https://www.keepersecurity.com/security.html)

#### Support

  * [Help Center](https://www.keepersecurity.com/support.html)
  * [Contact Sales](https://www.keepersecurity.com/contact.html?t=b&r=sales)
  * [System Status](https://statuspage.keeper.io/)
  * [Terms of Use](https://www.keepersecurity.com/termsofuse.html)

#### Solutions

  * [Enterprise Password Management](https://www.keepersecurity.com/enterprise.html)
  * [Business Password Management](https://www.keepersecurity.com/business.html)
  * [Privileged Access Management](https://www.keepersecurity.com/privileged-access-management/)
  * [Public Sector](https://www.keepersecurity.com/government-cloud/)

#### Pricing

  * [Business and Enterprise](https://www.keepersecurity.com/pricing/business-and-enterprise.html)
  * [Personal and Family](https://www.keepersecurity.com/pricing/personal-and-family.html)
  * [Student](https://www.keepersecurity.com/student-discount-50off.html)
  * [Military and Medical](https://www.keepersecurity.com/id-me-verification.html)

© 2025 Keeper Security, Inc.

