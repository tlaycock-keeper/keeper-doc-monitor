[![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fp7my2BdDymT53qZmRrq5%252FKeeper_600.png%3Falt%3Dmedia%26token%3D0a515169-d51f-4ca3-a458-f81394812492&width=260&dpr=4&quality=100&sign=ce896b6e&sv=2)![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fqe0JYUjJDoQWioecglOW%252Fkeeper-
no-
tag.png%3Falt%3Dmedia%26token%3D29dff9f6-9c7e-41f4-80a3-e879ee78667c&width=260&dpr=4&quality=100&sign=1e0a5ac8&sv=2)](https://docs.keeper.io/en/keeperpam/)

Ask or search...

`Ctrl``K`

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-
manager/integrations/kubernetes?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/kubernetes?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/kubernetes?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/kubernetes?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/kubernetes?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-
manager/integrations/kubernetes?fallback=true)[SSO Connect
Cloud](https://docs.keeper.io/en/sso-connect-cloud/secrets-
manager/integrations/kubernetes?fallback=true)[KeeperPAM and Secrets
Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/kubernetes?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/kubernetes?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/kubernetes?fallback=true)

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-
manager/integrations/kubernetes?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/kubernetes?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/kubernetes?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/kubernetes?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/kubernetes?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-
manager/integrations/kubernetes?fallback=true)[SSO Connect
Cloud](https://docs.keeper.io/en/sso-connect-cloud/secrets-
manager/integrations/kubernetes?fallback=true)[KeeperPAM and Secrets
Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/kubernetes?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/kubernetes?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/kubernetes?fallback=true)

  * [KeeperPAM](/en/keeperpam)
  * Privileged Access Manager

    * [Setup Steps](/en/keeperpam/privileged-access-manager/setup-steps)
    * [Quick Start: Sandbox](/en/keeperpam/privileged-access-manager/quick-start-sandbox)
    * [Getting Started](/en/keeperpam/privileged-access-manager/getting-started)

      * [Architecture](/en/keeperpam/privileged-access-manager/getting-started/architecture)

        * [Architecture Diagram](/en/keeperpam/privileged-access-manager/getting-started/architecture/system-architecture)
        * [Vault Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/vault-security)
        * [Router Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/router-security)
        * [Gateway Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/gateway-security)
        * [Connection and Tunnel Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/connection-and-tunnel-security)

      * [KeeperPAM Licensing](/en/keeperpam/privileged-access-manager/getting-started/keeperpam-licensing)
      * [Enforcement Policies](/en/keeperpam/privileged-access-manager/getting-started/enforcement-policies)
      * [Vault Structure](/en/keeperpam/privileged-access-manager/getting-started/vault-structure)
      * [Record Linking](/en/keeperpam/privileged-access-manager/getting-started/record-linking)
      * [Applications](/en/keeperpam/privileged-access-manager/getting-started/applications)
      * [Devices](/en/keeperpam/privileged-access-manager/getting-started/devices)
      * [Gateways](/en/keeperpam/privileged-access-manager/getting-started/gateways)

        * [Creating a Gateway](/en/keeperpam/privileged-access-manager/getting-started/gateways/one-time-access-token)
        * [Docker Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/docker-installation)
        * [Linux Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/linux-installation)
        * [Windows Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/windows-installation)
        * [Auto Updater](/en/keeperpam/privileged-access-manager/getting-started/gateways/auto-updater)
        * [Alerts and SIEM Integration](/en/keeperpam/privileged-access-manager/getting-started/gateways/alerts-and-siem-integration)
        * [Advanced Configuration](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration)

          * [Gateway Configuration with AWS KMS](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-aws-kms)
          * [Gateway Configuration with Custom Fields](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-custom-fields)

      * [PAM Configuration](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration)

        * [AWS Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/aws-environment-setup)
        * [Azure Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/azure-environment-setup)
        * [Local Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/local-environment-setup)

      * [PAM Resources](/en/keeperpam/privileged-access-manager/getting-started/pam-resources)

        * [PAM Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine)

          * [Example: Linux Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-linux-machine)
          * [Example: Azure Windows VM](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-azure-windows-vm)

        * [PAM Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database)

          * [Example: MySQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-mysql-database)
          * [Example: PostgreSQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-postgresql-database)
          * [Example: Microsoft SQL Server Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-microsoft-sql-server-database)

        * [PAM Directory](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-directory)
        * [PAM Remote Browser](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-remote-browser)
        * [PAM User](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-user)

      * [Sharing and Access Control](/en/keeperpam/privileged-access-manager/getting-started/sharing-and-access-control)
      * [Just-In-Time Access (JIT)](/en/keeperpam/privileged-access-manager/getting-started/just-in-time-access-jit)

    * [Password Rotation](/en/keeperpam/privileged-access-manager/password-rotation)

      * [Rotation Overview](/en/keeperpam/privileged-access-manager/password-rotation/rotation-overview)
      * [Rotation Use Cases](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases)

        * [Azure](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure)

          * [Azure AD Users](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-ad-users)
          * [Azure VM User Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-vm-user-accounts)
          * [Azure Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database)

            * [Azure SQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-sql)
            * [Azure MySQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mysql-single-or-flexible-database)
            * [Azure MariaDB Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mariadb-database)
            * [Azure PostgreSQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-postgresql-single-or-flexible-database)

          * [Azure App Secret Rotation](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-app-secret-rotation)

        * [AWS](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws)

          * [IAM User Password](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user)
          * [Managed Microsoft AD User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/directory-user)
          * [EC2 Virtual Machine User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/ec2-virtual-machine-user)
          * [IAM User Access Key](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user-access-key)
          * [Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database)

            * [AWS RDS for MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mysql)
            * [AWS RDS for SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-sql-server)
            * [AWS RDS for PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-postgresql)
            * [AWS RDS for MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mariadb)
            * [AWS RDS for Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-oracle)

        * [Local Network](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network)

          * [Active Directory or OpenLDAP User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/active-directory)
          * [Windows User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/windows-user)
          * [Linux User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/linux-user)
          * [macOS User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/macos-user)
          * [Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database)

            * [Native MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mysql)
            * [Native MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mariadb)
            * [Native PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/postgresql)
            * [Native MongoDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mongodb)
            * [Native MS SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/ms-sql-server)
            * [Native Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/oracle)

        * [SaaS Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts)

          * [Okta User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/okta-user)
          * [Snowflake User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/snowflake-user)
          * [Rotate Credential via REST API](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/rotate-credential-via-rest-api)

        * [Network Devices](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices)

          * [Cisco IOS XE](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-ios-xe)
          * [Cisco Meraki](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-meraki)

      * [Service Management](/en/keeperpam/privileged-access-manager/password-rotation/service-management)
      * [Post-Rotation Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts)

        * [Inputs and Outputs](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/parameters)
        * [Attaching Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/attaching-post-rotation-scripts-to-records)
        * [Code Examples](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/accessing-parameters)

    * [Connections](/en/keeperpam/privileged-access-manager/connections)

      * [Getting Started](/en/keeperpam/privileged-access-manager/connections/getting-started)
      * [Session Protocols](/en/keeperpam/privileged-access-manager/connections/session-protocols)

        * [SSH Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/ssh-connections)
        * [RDP Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rdp-connections)
        * [RBI Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rbi-connections)
        * [MySQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/mysql-connections)
        * [SQL Server Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/sql-server-connections)
        * [PostgreSQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/postgresql-connections)
        * [VNC Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/vnc-connections)
        * [Telnet Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/telnet-connections)

      * [Examples](/en/keeperpam/privileged-access-manager/connections/examples)

        * [SSH Protocol - Linux Machine](/en/keeperpam/privileged-access-manager/connections/examples/ssh-protocol-linux-machine)
        * [RDP Protocol - Azure Virtual Machine](/en/keeperpam/privileged-access-manager/connections/examples/rdp-protocol-azure-virtual-machine)
        * [MySQL Protocol - MySQL Database](/en/keeperpam/privileged-access-manager/connections/examples/mysql-protocol-mysql-database)
        * [PostgreSQL Protocol - PostgreSQL Database](/en/keeperpam/privileged-access-manager/connections/examples/postgresql-protocol-postgresql-database)

    * [Tunnels](/en/keeperpam/privileged-access-manager/tunnels)

      * [Setting up Tunnels](/en/keeperpam/privileged-access-manager/tunnels/setting-up-tunnels)

    * [Remote Browser Isolation](/en/keeperpam/privileged-access-manager/remote-browser-isolation)

      * [Setting up RBI](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi)

        * [URL Patterns & Resource URL Patterns](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/url-patterns-and-resource-url-patterns)
        * [Browser Autofill](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/browser-autofill)

    * [Session Recording & Playback](/en/keeperpam/privileged-access-manager/session-recording-and-playback)
    * [SSH Agent](/en/keeperpam/privileged-access-manager/ssh-agent)

      * [Integration with Git](/en/keeperpam/privileged-access-manager/ssh-agent/integration-with-git)

    * [Discovery](/en/keeperpam/privileged-access-manager/discovery)

      * [Discovery Basics](/en/keeperpam/privileged-access-manager/discovery/discovery-basics)
      * [Discovery using Commander](/en/keeperpam/privileged-access-manager/discovery/discovery-using-commander)
      * [Discovery using the Vault](/en/keeperpam/privileged-access-manager/discovery/discovery-using-the-vault)

    * [On-Prem Connection Manager](/en/keeperpam/privileged-access-manager/on-prem-connection-manager)
    * [References](/en/keeperpam/privileged-access-manager/references)

      * [Port Mapping](/en/keeperpam/privileged-access-manager/references/port-mapping)
      * [Setting up SSH](/en/keeperpam/privileged-access-manager/references/setting-up-ssh)
      * [Setting up WinRM](/en/keeperpam/privileged-access-manager/references/setting-up-winrm)
      * [Setting up SQL Server](/en/keeperpam/privileged-access-manager/references/setting-up-sql-server)
      * [Database Import and Export](/en/keeperpam/privileged-access-manager/references/database-import-and-export)
      * [Installing sqlcmd on Linux](/en/keeperpam/privileged-access-manager/references/installing-sqlcmd-on-linux)
      * [Installing Docker on Linux](/en/keeperpam/privileged-access-manager/references/installing-docker-on-linux)
      * [Creating KSM App for Rotation](/en/keeperpam/privileged-access-manager/references/creating-ksm-app-for-rotation)
      * [Active Directory Least Privilege](/en/keeperpam/privileged-access-manager/references/active-directory-least-privilege)
      * [Event Reporting](/en/keeperpam/privileged-access-manager/references/event-reporting)
      * [Importing PAM Records](/en/keeperpam/privileged-access-manager/references/importing-pam-records)
      * [Managing Rotation via CLI](/en/keeperpam/privileged-access-manager/references/managing-rotation-via-cli)
      * [Commander SDK](/en/keeperpam/privileged-access-manager/references/commander-sdk)
      * [Cron Spec](/en/keeperpam/privileged-access-manager/references/cron-spec)
      * [Preview Access](/en/keeperpam/privileged-access-manager/references/preview-access)

  * Endpoint Privilege Manager

    * [Overview](/en/keeperpam/endpoint-privilege-manager/overview)
    * [Setup](/en/keeperpam/endpoint-privilege-manager/setup)
    * [Deployment](/en/keeperpam/endpoint-privilege-manager/deployment)
    * [Policies](/en/keeperpam/endpoint-privilege-manager/policies)
    * [Managing Requests](/en/keeperpam/endpoint-privilege-manager/managing-requests)
  * [FAQs](/en/keeperpam/faqs)
  * Secrets Manager

    * [Secrets Manager Overview](/en/keeperpam/secrets-manager/overview)
    * [Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide)
    * [About KSM](/en/keeperpam/secrets-manager/about)

      * [Architecture](/en/keeperpam/secrets-manager/about/architecture)
      * [Terminology](/en/keeperpam/secrets-manager/about/terminology)
      * [Security & Encryption Model](/en/keeperpam/secrets-manager/about/security-encryption-model)
      * [One Time Access Token](/en/keeperpam/secrets-manager/about/one-time-token)
      * [Secrets Manager Configuration](/en/keeperpam/secrets-manager/about/secrets-manager-configuration)
      * [Keeper Notation](/en/keeperpam/secrets-manager/about/keeper-notation)
      * [Event Reporting](/en/keeperpam/secrets-manager/about/event-reporting)
      * [Field/Record Types](/en/keeperpam/secrets-manager/about/field-record-types)

    * [Secrets Manager CLI](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface)

      * [Profile Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/profile-command)
      * [Init Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/init-command)
      * [Secret Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/secret-command)
      * [Folder Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/folder-command)
      * [Sync Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/sync-command)
      * [Exec Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/exec-command)
      * [Config Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/config-command)
      * [Version Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/version-command)
      * [Misc Commands](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/vault-admin-commands)
      * [Docker Container](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/docker-container)
      * [Custom Record Types](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/custom-record-types)

    * [Password Rotation](/en/keeperpam/secrets-manager/password-rotation)
    * [Developer SDKs](/en/keeperpam/secrets-manager/developer-sdk-library)

      * [Python SDK](/en/keeperpam/secrets-manager/developer-sdk-library/python-sdk)
      * [Java/Kotlin SDK](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk/record-field-classes)

      * [JavaScript SDK](/en/keeperpam/secrets-manager/developer-sdk-library/javascript-sdk)
      * [.NET SDK](/en/keeperpam/secrets-manager/developer-sdk-library/.net-sdk)
      * [Go SDK](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk/record-field-classes)

      * [PowerShell](/en/keeperpam/secrets-manager/developer-sdk-library/powershell)
      * [Vault SDKs](/en/keeperpam/secrets-manager/developer-sdk-library/vault-sdks)

    * [Integrations](/en/keeperpam/secrets-manager/integrations)

      * [Ansible](/en/keeperpam/secrets-manager/integrations/ansible)

        * [Ansible Plugin](/en/keeperpam/secrets-manager/integrations/ansible/ansible-plugin)
        * [Ansible Tower](/en/keeperpam/secrets-manager/integrations/ansible/ansible-tower)

      * [AWS CLI Credential Process](/en/keeperpam/secrets-manager/integrations/aws-cli-credential-process)
      * [AWS Secrets Manager Sync](/en/keeperpam/secrets-manager/integrations/aws-secrets-manager)
      * [AWS KMS Encryption](/en/keeperpam/secrets-manager/integrations/aws-kms)
      * [Azure DevOps Extension](/en/keeperpam/secrets-manager/integrations/azure-devops-plugin)
      * [Azure Key Vault Sync](/en/keeperpam/secrets-manager/integrations/azure-key-vault)
      * [Azure Key Vault Encryption](/en/keeperpam/secrets-manager/integrations/azure-key-vault-ksm)
      * [Bitbucket Plugin](/en/keeperpam/secrets-manager/integrations/bitbucket-plugin)
      * [Docker Image](/en/keeperpam/secrets-manager/integrations/docker-image)
      * [Docker Runtime](/en/keeperpam/secrets-manager/integrations/docker-runtime)
      * [Docker Writer Image](/en/keeperpam/secrets-manager/integrations/docker-writer-image)
      * [Entrust HSM Encryption](/en/keeperpam/secrets-manager/integrations/entrust-hsm)
      * [Git - Sign Commits with SSH](/en/keeperpam/secrets-manager/integrations/git-sign-commits-with-ssh)
      * [GitHub Actions](/en/keeperpam/secrets-manager/integrations/github-actions)
      * [GitLab](/en/keeperpam/secrets-manager/integrations/gitlab-plugin)
      * [Google Cloud Secret Manager Sync](/en/keeperpam/secrets-manager/integrations/gcp-secret-manager)
      * [Google Cloud Key Management Encryption](/en/keeperpam/secrets-manager/integrations/google-cloud-key-management-encryption)
      * [Hashicorp Vault](/en/keeperpam/secrets-manager/integrations/hashicorp-vault)
      * [Heroku](/en/keeperpam/secrets-manager/integrations/heroku)
      * [Jenkins Plugin](/en/keeperpam/secrets-manager/integrations/jenkins-plugin)
      * [Keeper Connection Manager](/en/keeperpam/secrets-manager/integrations/keeper-connection-manager)
      * [Kubernetes External Secrets Operator](/en/keeperpam/secrets-manager/integrations/kubernetes-external-secrets-operator)
      * [Kubernetes (alternative)](/en/keeperpam/secrets-manager/integrations/kubernetes)
      * [Linux Keyring](/en/keeperpam/secrets-manager/integrations/linux-keyring)
      * [Octopus Deploy](/en/keeperpam/secrets-manager/integrations/octopus-deploy)
      * [Oracle Key Vault Encryption](/en/keeperpam/secrets-manager/integrations/oracle-key-vault)
      * [PowerShell Plugin](/en/keeperpam/secrets-manager/integrations/powershell-plugin)
      * [ServiceNow](/en/keeperpam/secrets-manager/integrations/servicenow)
      * [TeamCity](/en/keeperpam/secrets-manager/integrations/teamcity)
      * [Teller](/en/keeperpam/secrets-manager/integrations/teller)
      * [Terraform Plugin](/en/keeperpam/secrets-manager/integrations/terraform)

        * [Terraform Registry](https://registry.terraform.io/providers/Keeper-Security/secretsmanager/latest/docs/data-sources/address)

      * [Windows Credential Manager](/en/keeperpam/secrets-manager/integrations/windows-credential-manager)
      * [XSOAR](/en/keeperpam/secrets-manager/integrations/xsoar)

    * [Troubleshooting](/en/keeperpam/secrets-manager/troubleshooting)
  * Commander CLI

    * [Commander Overview](/en/keeperpam/commander-cli/overview)
    * [Installation and Setup](/en/keeperpam/commander-cli/commander-installation-setup)

      * [CLI Installation on Windows](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-windows)
      * [CLI Installation on macOS](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-mac)
      * [CLI Installation on Linux](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-linux)
      * [Python Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/developer-mode)
      * [.NET Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/net-developer-sdk)
      * [PowerShell Module](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-powershell)
      * [Logging in](/en/keeperpam/commander-cli/commander-installation-setup/logging-in)
      * [Configuration and Usage](/en/keeperpam/commander-cli/commander-installation-setup/configuration)

        * [AWS Secrets Manager](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-secrets-manager)
        * [AWS Key Management Service](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-key-management-service)

      * [Automating with Windows Task](/en/keeperpam/commander-cli/commander-installation-setup/automating-with-windows-task)
      * [Automating with AWS Lambda](/en/keeperpam/commander-cli/commander-installation-setup/using-commander-with-aws-lambda)
      * [Uninstallation](/en/keeperpam/commander-cli/commander-installation-setup/uninstallation)

    * [Command Reference](/en/keeperpam/commander-cli/command-reference)

      * [Import and Export Data](/en/keeperpam/commander-cli/command-reference/import-and-export-commands)

        * [Import/Export Commands](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/import-export-commands)
        * [CyberArk Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/cyberark-import)
        * [LastPass Data Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/lastpass-import)
        * [Delinea / Thycotic Secret Server Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/delinea-thycotic-secret-server-import)
        * [Keepass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/keepass-import)
        * [ManageEngine Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/manageengine-import)
        * [Myki Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/myki-import)
        * [Proton Pass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/proton-pass-import)
        * [CSV Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/csv-import)
        * [JSON Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/json-import)

      * [Reporting Commands](/en/keeperpam/commander-cli/command-reference/reporting-commands)

        * [Report Types](/en/keeperpam/commander-cli/command-reference/reporting-commands/report-types)

      * [Enterprise Management Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands)

        * [Creating and Inviting Users](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/creating-and-inviting-users)
        * [Compliance Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/compliance-commands)
        * [Breachwatch Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/breachwatch-commands)
        * [SCIM Push Configuration](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/scim-push-configuration)

      * [Record Commands](/en/keeperpam/commander-cli/command-reference/record-commands)

        * [Record Type Commands](/en/keeperpam/commander-cli/command-reference/record-commands/record-type-commands)
        * [Creating Record Types](/en/keeperpam/commander-cli/command-reference/record-commands/default-record-types)

      * [Sharing Commands](/en/keeperpam/commander-cli/command-reference/sharing-commands)
      * [KeeperPAM Commands](/en/keeperpam/commander-cli/command-reference/keeperpam-commands)
      * [Connection Commands](/en/keeperpam/commander-cli/command-reference/connection-commands)

        * [SSH](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh)
        * [SSH Agent](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh-agent)
        * [RDP](/en/keeperpam/commander-cli/command-reference/connection-commands/rdp)
        * [Connect Command](/en/keeperpam/commander-cli/command-reference/connection-commands/connection-to-hosts)
        * [SFTP Sync](/en/keeperpam/commander-cli/command-reference/connection-commands/sftp-sync)

      * [Secrets Manager Commands](/en/keeperpam/commander-cli/command-reference/secrets-manager-commands)
      * [MSP Management Commands](/en/keeperpam/commander-cli/command-reference/msp-management-commands)
      * [Miscellaneous Commands](/en/keeperpam/commander-cli/command-reference/misc-commands)
      * [Password Rotation](/en/keeperpam/commander-cli/command-reference/plugins)

        * [Password Rotation Commands](/en/keeperpam/commander-cli/command-reference/plugins/password-rotation)
        * [AWS Plugin](/en/keeperpam/commander-cli/command-reference/plugins/aws-plugin)
        * [Azure Plugin](/en/keeperpam/commander-cli/command-reference/plugins/azure-plugin)
        * [Microsoft SQL Server Plugin](/en/keeperpam/commander-cli/command-reference/plugins/microsoft-sql-server-plugin)
        * [MySQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/mysql-plugin)
        * [Oracle Plugin](/en/keeperpam/commander-cli/command-reference/plugins/oracle-plugin)
        * [PostgreSQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/postgresql-plugin)
        * [PSPasswd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/pspasswd-plugin)
        * [SSH Plugin](/en/keeperpam/commander-cli/command-reference/plugins/ssh-plugin)
        * [Unix Passwd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/unix-passwd-plugin)
        * [Windows Plugin](/en/keeperpam/commander-cli/command-reference/plugins/windows-plugin)
        * [Active Directory Plugin](/en/keeperpam/commander-cli/command-reference/plugins/active-directory-plugin)
        * [Automatic Execution](/en/keeperpam/commander-cli/command-reference/plugins/automatic-execution)

    * [Service Mode REST API](/en/keeperpam/commander-cli/service-mode-rest-api)
    * [Troubleshooting](/en/keeperpam/commander-cli/troubleshooting-commander-cli)

[Powered by
GitBook](https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=-MJXOXEifAmpyvNVL1to)

On this page

  * Features
  * Prerequisites
  * About
  * Setup
  * Create a Secrets Manager Configuration
  * Alternate Method: One Time Access Token and KSM CLI
  * Using the KSM Config
  * Examples
  * Example 1 - Custom App using SDK
  * Example 2 - NGINX SSL certificates
  * External Secrets
  * Next Steps

Was this helpful?

[Export as
PDF](/en/keeperpam/~gitbook/pdf?page=-MktCtiYBYc8OqUcflCC&only=yes&limit=100)

  1. [Secrets Manager](/en/keeperpam/secrets-manager)
  2. [Integrations](/en/keeperpam/secrets-manager/integrations)

# Kubernetes (alternative)

Keeper Secrets Manager integration into Kubernetes for dynamic secrets
retrieval

[PreviousKubernetes External Secrets Operator](/en/keeperpam/secrets-
manager/integrations/kubernetes-external-secrets-operator)[NextLinux
Keyring](/en/keeperpam/secrets-manager/integrations/linux-keyring)

Last updated 3 months ago

Was this helpful?

#### Company

  * [Keeper Home](https://www.keepersecurity.com/)
  * [About Us](https://www.keepersecurity.com/about.html)
  * [Careers](https://www.keepersecurity.com/jobs.html)
  * [Security](https://www.keepersecurity.com/security.html)

#### Support

  * [Help Center](https://www.keepersecurity.com/support.html)
  * [Contact Sales](https://www.keepersecurity.com/contact.html?t=b&r=sales)
  * [System Status](https://statuspage.keeper.io/)
  * [Terms of Use](https://www.keepersecurity.com/termsofuse.html)

#### Solutions

  * [Enterprise Password Management](https://www.keepersecurity.com/enterprise.html)
  * [Business Password Management](https://www.keepersecurity.com/business.html)
  * [Privileged Access Management](https://www.keepersecurity.com/privileged-access-management/)
  * [Public Sector](https://www.keepersecurity.com/government-cloud/)

#### Pricing

  * [Business and Enterprise](https://www.keepersecurity.com/pricing/business-and-enterprise.html)
  * [Personal and Family](https://www.keepersecurity.com/pricing/personal-and-family.html)
  * [Student](https://www.keepersecurity.com/student-discount-50off.html)
  * [Military and Medical](https://www.keepersecurity.com/id-me-verification.html)

Â© 2025 Keeper Security, Inc.

We recommend using the [Kubernetes External Secrets
Operator](/en/keeperpam/secrets-manager/integrations/kubernetes-external-
secrets-operator) integration for most use cases. This document describes an
alternate method of integration which does not utilize the External Secrets
Operator.

##

Features

  * Retrieve secrets from the Keeper Vault within the Kubernetes

  * Access secrets from the Keeper Vault in real-time across all pods

  * Copy secure file attachments from the Keeper Vault to the local filesystem

For a complete list of Keeper Secrets Manager features see the [Overview
](/en/keeperpam/secrets-manager/overview)

##

Prerequisites

This page documents the Secrets Manager Kubernetes integration. In order to
utilize this integration, you will need:

  * Keeper Secrets Manager access (See the [Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide) for more details)

    * Secrets Manager addon enabled for your Keeper account

    * Membership in a Role with the Secrets Manager enforcement policy enabled

  *     * 

##

About

Keeper Secrets Manager can be integrated into your K8s cluster for accessing
Keeper secrets in real-time across all pods.

##

Setup

###

Create a Secrets Manager Configuration

Using Commander, create a Secrets Manager device configuration for Kubernetes.
Note that this configuration is not IP locked and it is pre-initialized.

Create the configuration in Commander using this command:

`secrets-manager client add --app <APP NAME> --unlock-ip --config-init k8s`

**Example:**

Copy

    
    
    My Vault> sm client add --app MyAdd --unlock-ip --config-init k8s
    
    Successfully generated Client Device
    ====================================
    
    Initialized Config:
    
    apiVersion: v1
    data:
      config: ewog2N...ICIxMCIKfQ==
    metadata:
      name: ksm-config
      namespace: default
    type: Opaque
    
    IP Lock: Disabled
    Token Expires On: 2021-10-13 12:45:45
    App Access Expires on: Never

In the example above, copy lines 8 through 14 and place them into a file
called secret.yaml. Then, If you are using a machine with `kubectl` installed
and you have access to your cluster, add the KSM SDK config to your Kubernetes
secrets.

Copy

    
    
    $ kubectl apply -f secret.yaml

For more information on creating Secrets Manger configurations, see the
[Configuration Documentation](/en/keeperpam/secrets-manager/about/secrets-
manager-configuration)

###

Alternate Method: One Time Access Token and KSM CLI

Alternatively, you can create a configuration by generating a One Time Access
Token with Commander (or the Vault UI) and then using the [Keeper Secret
Manager CLI](/en/keeperpam/secrets-manager/secrets-manager-command-line-
interface) to create a configuration as demonstrated below (replace XX:XXX)
with the One Time Access Token.

Copy

    
    
    $ ksm init k8s XX:XXX
    
    apiVersion: v1
    data:
      config: ewog2N[...]ICIxMCIKfQ==
    kind: Secret
    metadata:
      name: ksm-config
      namespace: default
    type: Opaque

If you are using a machine with `kubectl` installed and you have access to
your cluster, the parameter `--apply` can be set to automatically add the KSM
SDK config to your Kubernetes secrets.

The output of redeeming the token can be piped to a file and then applied via
kubectl. For example:

Copy

    
    
    $ ksm init k8s XX:XXX > secret.yaml
    $ kubectl apply -f secret.yaml
    secret/ksm-config created

##

Using the KSM Config

The KSM config can be pulled into your K8s containers using
[secrets](https://kubernetes.io/docs/concepts/configuration/secret/#using-
secrets-as-environment-variables).

Copy

    
    
    apiVersion: v1
    kind: Pod
    metadata:
      name: secret-env-pod
    spec:
      containers:
      - name: mycontainer
        image: my_container:XXXXX
        env:
          - name: KSM_CONFIG
            valueFrom:
              secretKeyRef:
                name: ksm-config
                key: config
      restartPolicy: Never

At runtime, the Keeper Developer SDKs running in the K8s cluster will use the
environment variable **KSM_CONFIG** to retrieve the device configuration and
communicate with the Keeper Vault.

##

Examples

###

Example 1 - Custom App using SDK

Below is a simple example that will generate a deployment and service that
displays database secrets via a web application. This example uses the Keeper
Python Developer SDK for the web application. The SDK will get its
configuration from a Kubernetes secret and then retrieve PostgreSQL database
record information from the Keeper vault.

From the Keeper Vault, a "Database" record type is created using the following
information.

Now let's create our web application. The web page can be created using any of
the Developer SDKs. For this example, it will being using the Python SDK. A
simple Flask application with one endpoint will display the HTML that contains
the Vault record secrets. The secrets are retrieved using the [Keeper
Notation](/en/keeperpam/secrets-manager/about/keeper-notation) syntax.

Copy

    
    
    from flask import Flask
    from keeper_secrets_manager_core import SecretsManager
    import os
    
    app = Flask(__name__)
    
    @app.route("/")
    def hello_world():
        sm = SecretsManager()
        return """
    <h1>Database</h1>
    <ul>
        <li>Type: {}</li>
        <li>Host: {}</li>
        <li>Port: {}</li>
        <li>Login: {}</li>
        <li>Password: {}</li>
    </ul>
    """.format(
           sm.get_notation(os.environ.get("DB_TYPE")),
           sm.get_notation(os.environ.get("DB_HOST")),
           sm.get_notation(os.environ.get("DB_PORT")),
           sm.get_notation(os.environ.get("DB_LOGIN")),
           sm.get_notation(os.environ.get("DB_PASS")))

The next part is creating a Dockerfile. The Dockerfile below is based off of
the Python Debian images from Docker Hub.

The Python SDK uses the cryptography module. This module requires the language
Rust to be installed. Other Docker Hub images may provide Rust pre-installed.

Copy

    
    
    FROM python:3.10.0-slim-bullseye
    RUN apt-get update \
        && apt-get install -y gcc make libffi-dev curl libssl-dev \
        && apt-get clean
    RUN pip3 install --upgrade pip wheel
    
    # cryptology requires Rust to build
    RUN curl https://sh.rustup.rs -sSf > /tmp/rust.sh \
        && chmod a+x /tmp/rust.sh \
        && /tmp/rust.sh -y
    ENV PATH $PATH:/root/.cargo/bin
    
    RUN pip3 install \
        flask \
        keeper-secrets-manager-core
    
    RUN groupadd -g 5000 demo
    RUN useradd -g demo demo
    
    # Copy our application into the image
    COPY demo.py /demo.py
    
    USER demo
    
    ENV FLASK_APP demo
    
    EXPOSE 5000
    CMD ["flask", "run"]

Next we will build a Docker image named ksm_demo.

Copy

    
    
    $ docker build -t ksm_demo .

Assuming there is access to the Kubernetes cluster, the config can be
generated from the One Time Access Token and automatically applied.

Copy

    
    
    $ ksm init k8s --apply XX:XXXXXXXXXXX
    secret/ksm-config created
    Created secret for KSM config.

You can see the secret entry when you enter `kubectl get secret`.

Copy

    
    
    $ kubectl get secret ksm-config
    NAME         TYPE     DATA   AGE
    ksm-config   Opaque   1      55s

You can then make a deployment and service for the **ksm_demo** Docker image.
This example is going to name the file **ksm_demo.yaml**.

Defining which secrets you need, and the config for the SDK, happen in the
**env** section in the list of **containers**. In this section the
**KSM_CONFIG** environmental variable is defined to get it's value from
the**ksm-config** Kubernetes secret, specifically the **config** key of the
secret.

The other environmental variables are just list of name/values. The value is
Keeper Notation which the web application will send to the notation retrieval
method of the SDK.

The second record in the **ksm_demo.yaml** file is the **Service** definition.
This can be changed to whatever works with your Kubernetes cluster. In our
example, it uses an external IP address. It's safe to use one of your
Kubernetes nodes IP address, 10.0.1.18 for the example.

Copy

    
    
    ---
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: ksm-demo-deployment
      labels:
        app: ksm-demo
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ksm-demo
      template:
        metadata:
          labels:
            app: ksm-demo
        spec:
          nodeSelector:
            kubernetes.io/hostname: work
          dnsPolicy: "None"
          dnsConfig:
            nameservers:
              - 10.0.1.207
              - 1.1.1.1
          containers:
            - name: ksm-demo
              image: ksm_demo:latest
              imagePullPolicy: IfNotPresent
              ports:
                - containerPort: 5000
                  protocol: TCP
              env:
                - name: KSM_CONFIG
                  valueFrom:
                    secretKeyRef:
                      name: ksm-config
                      key: config
                - name: DB_TYPE
                  value: "keeper://IUCvqyWcx7sG-BGIK1R9-g/field/Type"
                - name: DB_HOST
                  value: "keeper://IUCvqyWcx7sG-BGIK1R9-g/field/host[hostName]"
                - name: DB_PORT
                  value: "keeper://IUCvqyWcx7sG-BGIK1R9-g/field/host[port]"
                - name: DB_LOGIN
                  value: "keeper://IUCvqyWcx7sG-BGIK1R9-g/field/login"
                - name: DB_PASS
                  value: "keeper://IUCvqyWcx7sG-BGIK1R9-g/field/password"
    ---   
    apiVersion: v1
    kind: Service
    metadata:
      name: ksm-demo-service
    spec:
      ports:
        - name: http
          port: 5000
          targetPort: 5000
          protocol: TCP
      selector:
        app: ksm-demo
      externalIPs:
        - 10.0.1.18

At this point the deployment and service are ready to be applied.

Copy

    
    
    $ kubectl apply -f ksm_demo.yaml
    deployment/ksm-demo-deployment created
    service/ksm-demo-service created

Wait until your deployment is ready. Either monitor it via the command line or
Kubernetes Dashboard.

Copy

    
    
    $ kubectl get deployment ksm-demo-deployment
    NAME                  READY   UP-TO-DATE   AVAILABLE   AGE
    ksm-demo-deployment   1/1     1            1           46m
    
    $ kubectl get svc ksm-demo-service
    NAME               TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE
    ksm-demo-service   ClusterIP   10.107.91.89   10.0.1.18     5000/TCP   56m

Finally, use a web browser and go to the external IP address, port 5000, and
you will see the Keeper vault record database secrets.

###

Example 2 - NGINX SSL certificates

In this example a pod will be created that contains the stock NGINX docker
image and SSL certificates retrieved from the Keeper Vault.

A Login record is created in the vault to hold the SSL certificate, private
key, and certificate password.

A one time token is generated and added to the Kubernetes ConfigMap.

Copy

    
    
    $ ksm init k8s XX:XXX > secret.yaml
    $ kubectl apply -f secret.yaml
    secret/ksm-config created

The example website is simply an index HTML page. The HTML can be stored in
the ConfigMap and mounted in to the document root directory.

Copy

    
    
    ---
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: nginx-html-config
      namespace: default
      labels:
        app: nginx
    data:
      index.html: |
        <html>
          <head>
             <title>Nginx Test Page</title>
          </head>
          <body>
            <h1>Hello From Keeper Secrets Manager!</h1>
          </body>
        </html>

The `default.conf` will be overwritten by our example. The certificate, key,
and password will be placed in to the `/etc/keys` directory. For non-
interactive startup, NGINX requires the certificate password be placed in a
file and `ssl_password_file` to be included in the server configuration.

Copy

    
    
    ---
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: nginx-config
      namespace: default
      labels:
        app: nginx
    data:
      default.conf: |
        server {
          listen 80 default;
          server_name localhost;
          location / {
            root /var/www/nginx-default;
            index index.html index.htm;
          }
        }
        server {
          listen 443 ssl;
          server_name localhost;
          ssl_certificate /etc/keys/example.com.crt;
          ssl_certificate_key /etc/keys/example.com.key;
          ssl_password_file /etc/keys/global.pass;
          ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
          ssl_ciphers HIGH:!aNULL:!MD5;
          location / {
            root /var/www/nginx-default;
            index index.html index.htm;
          }
        }

The deployment for this example looks like the following:

Copy

    
    
    ---
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: nginx-deployment
      labels:
        app: nginx
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: nginx
      template:
        metadata:
          labels:
            app: nginx
        spec:
          initContainers:
            - name: ksm
              image: keeper/keeper-secrets-manager-writer:latest
              env:
                - name: KSM_CONFIG
                  valueFrom:
                    secretKeyRef:
                      name: ksm-config
                      key: config
                - name: SECRETS
                  value: |
                    5x0v0VFwYj2VvuhamrJhzQ/field/password > file:/etc/keys/global.pass
                    5x0v0VFwYj2VvuhamrJhzQ/file/example.com.crt > file:/etc/keys/example.com.crt
                    5x0v0VFwYj2VvuhamrJhzQ/file/example.com.key > file:/etc/keys/example.com.key
              volumeMounts:
                - mountPath: "/etc/keys"
                  name: keys-volume
          containers:
            - name: nginx
              image: nginx:1.21.4-alpine
              imagePullPolicy: IfNotPresent
              ports:
                - containerPort: 80
                  protocol: TCP
                - containerPort: 443
                  protocol: TCP
              volumeMounts:
                - mountPath: "/etc/keys"
                  name: keys-volume
                - mountPath: "/etc/nginx/conf.d/default.conf"
                  name: nginx-config-file
                  subPath: default.conf
                - mountPath: "/var/www/nginx-default/index.html"
                  name: nginx-html-file
                  subPath: index.html
          volumes:
            - name: keys-volume
              emptyDir: {}
            - name: nginx-config-file
              configMap:
                name: nginx-config
            - name: nginx-html-file
              configMap:
                name: nginx-html-config
          imagePullSecrets:
            - name: my-docker-hub-secrets

The docker image `keeper/keeper-secrets-manager-writer` is used for an
initialization container. The container will retrieve the secrets and write
them to disk so they can be used by NGINX. The secrets are written to the
pod's emptyDir volume, mounted to /etc/keys. This directory will be removed
when the pod is deleted.

Documentation for the Keeper Secrets Manager Writer can be found
[here](/en/keeperpam/secrets-manager/integrations/docker-writer-image).

The main container will also mount the pod's emptyDir volume to /etc/keys. And
will also mount the `default.conf` into /etc/nginx/conf.d and the `index.html`
file into the document root for the server.

The last part is to create a service to access NGINX as shown below.

Copy

    
    
    ---
    apiVersion: v1
    kind: Service
    metadata:
      name: nginx-service
    spec:
      ports:
        - name: http
          port: 80
          targetPort:  80
          protocol: TCP
        - name: https
          port: 443
          targetPort: 443
          protocol: TCP
      selector:
        app: nginx
      externalIPs:
        - XXX.XXX.XXX.XX

The service can be tested by going to the external IP via https (ie
https://XXX.XXX.XXX.XXX). Notice the lock in the address bar indicates the
certificate is valid.

###

External Secrets

External Secrets is a Kubernetes operator that synchronizes secrets from
External APIs and injects them into Kubernetes. For more information on how to
setup External Secrets to synchronize secrets from your Keeper Vault into
Kubernetes, visit the following:

[Kubernetes External Secrets Operator](/en/keeperpam/secrets-
manager/integrations/kubernetes-external-secrets-operator)

###

Next Steps

At this point, you can now integrate Keeper Secrets Manager into your K8s
deployments using any of the [Secrets Manager SDKs](/en/keeperpam/secrets-
manager/developer-sdk-library).

A Keeper  with secrets shared to it

See the  for instructions on creating an Application

Example Web Application displaying Keeper secrets

[Secrets Manager Application](/en/keeperpam/secrets-
manager/about/terminology#application)

[Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide#2.-create-
an-application)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
legacy-
files%2Fo%2Fassets%252F-MJXOXEifAmpyvNVL1to%252F-MktCpUkVepMUI2ry2UO%252F-MktD28kvZqqUuAoO5kD%252Fkubernetes-
plugin-
header.jpg%3Falt%3Dmedia%26token%3D19f48711-5185-45a7-96c4-efc7d11b34cc&width=768&dpr=4&quality=100&sign=6770b66&sv=2)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252F-MJXOXEifAmpyvNVL1to%252Fuploads%252F6TQeKxdHn0zbmfZKG270%252Fimage.png%3Falt%3Dmedia%26token%3D05e69023-6c1d-44ec-819c-842699af867d&width=768&dpr=4&quality=100&sign=307eac3b&sv=2)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252F-MJXOXEifAmpyvNVL1to%252Fuploads%252Fdy9FYgLsLsgtiFVY5RGh%252FScreen%2520Shot%25202021-12-13%2520at%252011.13.18%2520AM.png%3Falt%3Dmedia%26token%3D7a1a0a7a-ce97-4d5f-ad26-5b817ddfc178&width=768&dpr=4&quality=100&sign=25762f75&sv=2)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252F-MJXOXEifAmpyvNVL1to%252Fuploads%252FBWcNIoRMf6uNGoiDBVo5%252FScreen%2520Shot%25202021-12-13%2520at%252010.32.10%2520AM.png%3Falt%3Dmedia%26token%3Defdf29b3-c17f-4f19-bd49-5003f2de86df&width=768&dpr=4&quality=100&sign=54d25ebc&sv=2)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252F-MJXOXEifAmpyvNVL1to%252Fuploads%252FhMaZVLZ1ulGe9Ub1hDB7%252Fimage.png%3Falt%3Dmedia%26token%3D2c2f355d-6c5f-4abf-8779-2285fc87ce00&width=768&dpr=4&quality=100&sign=7385b406&sv=2)

