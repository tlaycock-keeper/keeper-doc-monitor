[![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fp7my2BdDymT53qZmRrq5%252FKeeper_600.png%3Falt%3Dmedia%26token%3D0a515169-d51f-4ca3-a458-f81394812492&width=260&dpr=4&quality=100&sign=ce896b6e&sv=2)![Logo](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F2557019839-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
x-
prod.appspot.com%2Fo%2Fspaces%252FOthZEjvFH25YbgTBe0jT%252Flogo%252Fqe0JYUjJDoQWioecglOW%252Fkeeper-
no-
tag.png%3Falt%3Dmedia%26token%3D29dff9f6-9c7e-41f4-80a3-e879ee78667c&width=260&dpr=4&quality=100&sign=1e0a5ac8&sv=2)](https://docs.keeper.io/en/keeperpam/)

Ask or search...

`Ctrl``K`

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[SSO Connect
Cloud](https://docs.keeper.io/en/sso-connect-cloud/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[KeeperPAM and
Secrets Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)

KeeperPAM and Secrets Manager

[Docs Home](https://docs.keeper.io/en/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Keeper Connection
Manager](https://docs.keeper.io/en/keeper-connection-manager/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[User
Guides](https://docs.keeper.io/en/user-guides/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Release
Notes](https://docs.keeper.io/en/release-notes/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Enterprise
Guide](https://docs.keeper.io/en/enterprise-guide/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[MSP
Guide](https://docs.keeper.io/en/msp-guide/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[SSO Connect
Cloud](https://docs.keeper.io/en/sso-connect-cloud/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[KeeperPAM and
Secrets Manager](https://docs.keeper.io/en/keeperpam/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[SSO Connect On-
Prem](https://docs.keeper.io/en/sso-connect-on-prem/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)[Keeper
Bridge](https://docs.keeper.io/en/keeper-bridge/secrets-
manager/integrations/ansible/ansible-plugin?fallback=true)

  * [Overview](/en/keeperpam)
  * Privileged Access Manager

    * [Setup Steps](/en/keeperpam/privileged-access-manager/setup-steps)
    * [Quick Start: Sandbox](/en/keeperpam/privileged-access-manager/quick-start-sandbox)
    * [Getting Started](/en/keeperpam/privileged-access-manager/getting-started)

      * [Architecture](/en/keeperpam/privileged-access-manager/getting-started/architecture)

        * [Architecture Diagram](/en/keeperpam/privileged-access-manager/getting-started/architecture/system-architecture)
        * [Vault Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/vault-security)
        * [Router Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/router-security)
        * [Gateway Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/gateway-security)
        * [Connection and Tunnel Security](/en/keeperpam/privileged-access-manager/getting-started/architecture/connection-and-tunnel-security)

      * [KeeperPAM Licensing](/en/keeperpam/privileged-access-manager/getting-started/keeperpam-licensing)
      * [Enforcement Policies](/en/keeperpam/privileged-access-manager/getting-started/enforcement-policies)
      * [Vault Structure](/en/keeperpam/privileged-access-manager/getting-started/vault-structure)
      * [Record Linking](/en/keeperpam/privileged-access-manager/getting-started/record-linking)
      * [Applications](/en/keeperpam/privileged-access-manager/getting-started/applications)
      * [Devices](/en/keeperpam/privileged-access-manager/getting-started/devices)
      * [Gateways](/en/keeperpam/privileged-access-manager/getting-started/gateways)

        * [Creating a Gateway](/en/keeperpam/privileged-access-manager/getting-started/gateways/one-time-access-token)
        * [Docker Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/docker-installation)
        * [Linux Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/linux-installation)
        * [Windows Installation](/en/keeperpam/privileged-access-manager/getting-started/gateways/windows-installation)
        * [Auto Updater](/en/keeperpam/privileged-access-manager/getting-started/gateways/auto-updater)
        * [Alerts and SIEM Integration](/en/keeperpam/privileged-access-manager/getting-started/gateways/alerts-and-siem-integration)
        * [Advanced Configuration](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration)

          * [Gateway Configuration with AWS KMS](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-aws-kms)
          * [Gateway Configuration with Custom Fields](/en/keeperpam/privileged-access-manager/getting-started/gateways/advanced-configuration/gateway-configuration-with-custom-fields)

      * [PAM Configuration](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration)

        * [AWS Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/aws-environment-setup)
        * [Azure Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/azure-environment-setup)
        * [Local Environment Setup](/en/keeperpam/privileged-access-manager/getting-started/pam-configuration/local-environment-setup)

      * [PAM Resources](/en/keeperpam/privileged-access-manager/getting-started/pam-resources)

        * [PAM Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine)

          * [Example: Linux Machine](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-linux-machine)
          * [Example: Azure Windows VM](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-machine/example-azure-windows-vm)

        * [PAM Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database)

          * [Example: MySQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-mysql-database)
          * [Example: PostgreSQL Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-postgresql-database)
          * [Example: Microsoft SQL Server Database](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-database/example-microsoft-sql-server-database)

        * [PAM Directory](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-directory)
        * [PAM Remote Browser](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-remote-browser)
        * [PAM User](/en/keeperpam/privileged-access-manager/getting-started/pam-resources/pam-user)

      * [Sharing and Access Control](/en/keeperpam/privileged-access-manager/getting-started/sharing-and-access-control)
      * [Just-In-Time Access (JIT)](/en/keeperpam/privileged-access-manager/getting-started/just-in-time-access-jit)

    * [Password Rotation](/en/keeperpam/privileged-access-manager/password-rotation)

      * [Rotation Overview](/en/keeperpam/privileged-access-manager/password-rotation/rotation-overview)
      * [Rotation Use Cases](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases)

        * [Azure](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure)

          * [Azure AD Users](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-ad-users)
          * [Azure VM User Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-vm-user-accounts)
          * [Azure Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database)

            * [Azure SQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-sql)
            * [Azure MySQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mysql-single-or-flexible-database)
            * [Azure MariaDB Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-mariadb-database)
            * [Azure PostgreSQL - Single or Flexible Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/managed-database/azure-postgresql-single-or-flexible-database)

          * [Azure App Secret Rotation](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/azure/azure-app-secret-rotation)

        * [AWS](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws)

          * [IAM User Password](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user)
          * [Managed Microsoft AD User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/directory-user)
          * [EC2 Virtual Machine User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/ec2-virtual-machine-user)
          * [IAM User Access Key](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/iam-user-access-key)
          * [Managed Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database)

            * [AWS RDS for MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mysql)
            * [AWS RDS for SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-sql-server)
            * [AWS RDS for PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-postgresql)
            * [AWS RDS for MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-mariadb)
            * [AWS RDS for Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/aws/managed-database/aws-rds-for-oracle)

        * [Local Network](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network)

          * [Active Directory or OpenLDAP User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/active-directory)
          * [Windows User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/windows-user)
          * [Linux User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/linux-user)
          * [macOS User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/macos-user)
          * [Database](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database)

            * [Native MySQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mysql)
            * [Native MariaDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mariadb)
            * [Native PostgreSQL](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/postgresql)
            * [Native MongoDB](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/mongodb)
            * [Native MS SQL Server](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/ms-sql-server)
            * [Native Oracle](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/local-network/database/oracle)

        * [SaaS Accounts](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts)

          * [Okta User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/okta-user)
          * [Snowflake User](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/snowflake-user)
          * [Rotate Credential via REST API](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/saas-accounts/rotate-credential-via-rest-api)

        * [Network Devices](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices)

          * [Cisco IOS XE](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-ios-xe)
          * [Cisco Meraki](/en/keeperpam/privileged-access-manager/password-rotation/rotation-use-cases/network-devices/cisco-meraki)

      * [Service Management](/en/keeperpam/privileged-access-manager/password-rotation/service-management)
      * [Post-Rotation Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts)

        * [Inputs and Outputs](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/parameters)
        * [Attaching Scripts](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/attaching-post-rotation-scripts-to-records)
        * [Code Examples](/en/keeperpam/privileged-access-manager/password-rotation/post-rotation-scripts/accessing-parameters)

    * [Connections](/en/keeperpam/privileged-access-manager/connections)

      * [Getting Started](/en/keeperpam/privileged-access-manager/connections/getting-started)
      * [Session Protocols](/en/keeperpam/privileged-access-manager/connections/session-protocols)

        * [SSH Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/ssh-connections)
        * [RDP Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rdp-connections)
        * [RBI Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/rbi-connections)
        * [MySQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/mysql-connections)
        * [SQL Server Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/sql-server-connections)
        * [PostgreSQL Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/postgresql-connections)
        * [VNC Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/vnc-connections)
        * [Telnet Connections](/en/keeperpam/privileged-access-manager/connections/session-protocols/telnet-connections)

      * [Examples](/en/keeperpam/privileged-access-manager/connections/examples)

        * [SSH Protocol - Linux Machine](/en/keeperpam/privileged-access-manager/connections/examples/ssh-protocol-linux-machine)
        * [RDP Protocol - Azure Virtual Machine](/en/keeperpam/privileged-access-manager/connections/examples/rdp-protocol-azure-virtual-machine)
        * [MySQL Protocol - MySQL Database](/en/keeperpam/privileged-access-manager/connections/examples/mysql-protocol-mysql-database)
        * [PostgreSQL Protocol - PostgreSQL Database](/en/keeperpam/privileged-access-manager/connections/examples/postgresql-protocol-postgresql-database)

    * [Tunnels](/en/keeperpam/privileged-access-manager/tunnels)

      * [Setting up Tunnels](/en/keeperpam/privileged-access-manager/tunnels/setting-up-tunnels)

    * [Remote Browser Isolation](/en/keeperpam/privileged-access-manager/remote-browser-isolation)

      * [Setting up RBI](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi)

        * [URL Patterns & Resource URL Patterns](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/url-patterns-and-resource-url-patterns)
        * [Browser Autofill](/en/keeperpam/privileged-access-manager/remote-browser-isolation/setting-up-rbi/browser-autofill)

    * [Session Recording & Playback](/en/keeperpam/privileged-access-manager/session-recording-and-playback)
    * [SSH Agent](/en/keeperpam/privileged-access-manager/ssh-agent)

      * [Integration with Git](/en/keeperpam/privileged-access-manager/ssh-agent/integration-with-git)

    * [Discovery](/en/keeperpam/privileged-access-manager/discovery)

      * [Discovery Basics](/en/keeperpam/privileged-access-manager/discovery/discovery-basics)
      * [Discovery using Commander](/en/keeperpam/privileged-access-manager/discovery/discovery-using-commander)
      * [Discovery using the Vault](/en/keeperpam/privileged-access-manager/discovery/discovery-using-the-vault)

    * [On-Prem Connection Manager](/en/keeperpam/privileged-access-manager/on-prem-connection-manager)
    * [References](/en/keeperpam/privileged-access-manager/references)

      * [Port Mapping](/en/keeperpam/privileged-access-manager/references/port-mapping)
      * [Setting up SSH](/en/keeperpam/privileged-access-manager/references/setting-up-ssh)
      * [Setting up WinRM](/en/keeperpam/privileged-access-manager/references/setting-up-winrm)
      * [Setting up SQL Server](/en/keeperpam/privileged-access-manager/references/setting-up-sql-server)
      * [Database Import and Export](/en/keeperpam/privileged-access-manager/references/database-import-and-export)
      * [Installing sqlcmd on Linux](/en/keeperpam/privileged-access-manager/references/installing-sqlcmd-on-linux)
      * [Installing Docker on Linux](/en/keeperpam/privileged-access-manager/references/installing-docker-on-linux)
      * [Creating KSM App for Rotation](/en/keeperpam/privileged-access-manager/references/creating-ksm-app-for-rotation)
      * [Active Directory Least Privilege](/en/keeperpam/privileged-access-manager/references/active-directory-least-privilege)
      * [Event Reporting](/en/keeperpam/privileged-access-manager/references/event-reporting)
      * [Importing PAM Records](/en/keeperpam/privileged-access-manager/references/importing-pam-records)
      * [Managing Rotation via CLI](/en/keeperpam/privileged-access-manager/references/managing-rotation-via-cli)
      * [Commander SDK](/en/keeperpam/privileged-access-manager/references/commander-sdk)
      * [Cron Spec](/en/keeperpam/privileged-access-manager/references/cron-spec)
      * [Preview Access](/en/keeperpam/privileged-access-manager/references/preview-access)

  * Endpoint Privilege Manager

    * [Overview](/en/keeperpam/endpoint-privilege-manager/overview)
    * [Setup](/en/keeperpam/endpoint-privilege-manager/setup)
    * [Deployment](/en/keeperpam/endpoint-privilege-manager/deployment)
    * [Policies](/en/keeperpam/endpoint-privilege-manager/policies)
    * [Managing Requests](/en/keeperpam/endpoint-privilege-manager/managing-requests)
  * [FAQs](/en/keeperpam/faqs)
  * Secrets Manager

    * [Secrets Manager Overview](/en/keeperpam/secrets-manager/overview)
    * [Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide)
    * [About KSM](/en/keeperpam/secrets-manager/about)

      * [Architecture](/en/keeperpam/secrets-manager/about/architecture)
      * [Terminology](/en/keeperpam/secrets-manager/about/terminology)
      * [Security & Encryption Model](/en/keeperpam/secrets-manager/about/security-encryption-model)
      * [One Time Access Token](/en/keeperpam/secrets-manager/about/one-time-token)
      * [Secrets Manager Configuration](/en/keeperpam/secrets-manager/about/secrets-manager-configuration)
      * [Keeper Notation](/en/keeperpam/secrets-manager/about/keeper-notation)
      * [Event Reporting](/en/keeperpam/secrets-manager/about/event-reporting)
      * [Field/Record Types](/en/keeperpam/secrets-manager/about/field-record-types)

    * [Secrets Manager CLI](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface)

      * [Profile Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/profile-command)
      * [Init Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/init-command)
      * [Secret Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/secret-command)
      * [Folder Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/folder-command)
      * [Sync Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/sync-command)
      * [Exec Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/exec-command)
      * [Config Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/config-command)
      * [Version Command](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/version-command)
      * [Misc Commands](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/vault-admin-commands)
      * [Docker Container](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/docker-container)
      * [Custom Record Types](/en/keeperpam/secrets-manager/secrets-manager-command-line-interface/custom-record-types)

    * [Password Rotation](/en/keeperpam/secrets-manager/password-rotation)
    * [Developer SDKs](/en/keeperpam/secrets-manager/developer-sdk-library)

      * [Python SDK](/en/keeperpam/secrets-manager/developer-sdk-library/python-sdk)
      * [Java/Kotlin SDK](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/java-sdk/record-field-classes)

      * [JavaScript SDK](/en/keeperpam/secrets-manager/developer-sdk-library/javascript-sdk)
      * [.NET SDK](/en/keeperpam/secrets-manager/developer-sdk-library/.net-sdk)
      * [Go SDK](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk)

        * [Record Field Classes](/en/keeperpam/secrets-manager/developer-sdk-library/golang-sdk/record-field-classes)

      * [PowerShell](/en/keeperpam/secrets-manager/developer-sdk-library/powershell)
      * [Vault SDKs](/en/keeperpam/secrets-manager/developer-sdk-library/vault-sdks)

    * [Integrations](/en/keeperpam/secrets-manager/integrations)

      * [Ansible](/en/keeperpam/secrets-manager/integrations/ansible)

        * [Ansible Plugin](/en/keeperpam/secrets-manager/integrations/ansible/ansible-plugin)
        * [Ansible Tower](/en/keeperpam/secrets-manager/integrations/ansible/ansible-tower)

      * [AWS CLI Credential Process](/en/keeperpam/secrets-manager/integrations/aws-cli-credential-process)
      * [AWS Secrets Manager](/en/keeperpam/secrets-manager/integrations/aws-secrets-manager)
      * [AWS KMS](/en/keeperpam/secrets-manager/integrations/aws-kms)
      * [Azure DevOps Extension](/en/keeperpam/secrets-manager/integrations/azure-devops-plugin)
      * [Azure Key Vault](/en/keeperpam/secrets-manager/integrations/azure-key-vault)
      * [Bitbucket Plugin](/en/keeperpam/secrets-manager/integrations/bitbucket-plugin)
      * [Docker Image](/en/keeperpam/secrets-manager/integrations/docker-image)
      * [Docker Runtime](/en/keeperpam/secrets-manager/integrations/docker-runtime)
      * [Docker Writer Image](/en/keeperpam/secrets-manager/integrations/docker-writer-image)
      * [Entrust HSM](/en/keeperpam/secrets-manager/integrations/entrust-hsm)
      * [GCP Secret Manager](/en/keeperpam/secrets-manager/integrations/gcp-secret-manager)
      * [Git - Sign Commits with SSH](/en/keeperpam/secrets-manager/integrations/git-sign-commits-with-ssh)
      * [GitHub Actions](/en/keeperpam/secrets-manager/integrations/github-actions)
      * [GitLab](/en/keeperpam/secrets-manager/integrations/gitlab-plugin)
      * [Hashicorp Vault](/en/keeperpam/secrets-manager/integrations/hashicorp-vault)
      * [Heroku](/en/keeperpam/secrets-manager/integrations/heroku)
      * [Jenkins Plugin](/en/keeperpam/secrets-manager/integrations/jenkins-plugin)
      * [Keeper Connection Manager](/en/keeperpam/secrets-manager/integrations/keeper-connection-manager)
      * [Kubernetes External Secrets Operator](/en/keeperpam/secrets-manager/integrations/kubernetes-external-secrets-operator)
      * [Kubernetes (alternative)](/en/keeperpam/secrets-manager/integrations/kubernetes)
      * [Linux Keyring](/en/keeperpam/secrets-manager/integrations/linux-keyring)
      * [Octopus Deploy](/en/keeperpam/secrets-manager/integrations/octopus-deploy)
      * [PowerShell Plugin](/en/keeperpam/secrets-manager/integrations/powershell-plugin)
      * [ServiceNow](/en/keeperpam/secrets-manager/integrations/servicenow)
      * [Teller](/en/keeperpam/secrets-manager/integrations/teller)
      * [TeamCity](/en/keeperpam/secrets-manager/integrations/teamcity)
      * [Terraform Plugin](/en/keeperpam/secrets-manager/integrations/terraform)

        * [Terraform Registry](https://registry.terraform.io/providers/Keeper-Security/secretsmanager/latest/docs/data-sources/address)

      * [Windows Credential Manager](/en/keeperpam/secrets-manager/integrations/windows-credential-manager)
      * [XSOAR](/en/keeperpam/secrets-manager/integrations/xsoar)

    * [Troubleshooting](/en/keeperpam/secrets-manager/troubleshooting)
  * Commander CLI

    * [Commander Overview](/en/keeperpam/commander-cli/overview)
    * [Installation and Setup](/en/keeperpam/commander-cli/commander-installation-setup)

      * [CLI Installation on Windows](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-windows)
      * [CLI Installation on macOS](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-mac)
      * [CLI Installation on Linux](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-linux)
      * [Python Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/developer-mode)
      * [.NET Developer Setup](/en/keeperpam/commander-cli/commander-installation-setup/net-developer-sdk)
      * [PowerShell Module](/en/keeperpam/commander-cli/commander-installation-setup/installation-on-powershell)
      * [Logging in](/en/keeperpam/commander-cli/commander-installation-setup/logging-in)
      * [Configuration and Usage](/en/keeperpam/commander-cli/commander-installation-setup/configuration)

        * [AWS Secrets Manager](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-secrets-manager)
        * [AWS Key Management Service](/en/keeperpam/commander-cli/commander-installation-setup/configuration/aws-key-management-service)

      * [Automating with Windows Task](/en/keeperpam/commander-cli/commander-installation-setup/automating-with-windows-task)
      * [Automating with AWS Lambda](/en/keeperpam/commander-cli/commander-installation-setup/using-commander-with-aws-lambda)
      * [Uninstallation](/en/keeperpam/commander-cli/commander-installation-setup/uninstallation)

    * [Command Reference](/en/keeperpam/commander-cli/command-reference)

      * [Import and Export Data](/en/keeperpam/commander-cli/command-reference/import-and-export-commands)

        * [Import/Export Commands](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/import-export-commands)
        * [CyberArk Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/cyberark-import)
        * [LastPass Data Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/lastpass-import)
        * [Delinea / Thycotic Secret Server Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/delinea-thycotic-secret-server-import)
        * [Keepass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/keepass-import)
        * [ManageEngine Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/manageengine-import)
        * [Myki Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/myki-import)
        * [Proton Pass Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/proton-pass-import)
        * [CSV Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/csv-import)
        * [JSON Import](/en/keeperpam/commander-cli/command-reference/import-and-export-commands/json-import)

      * [Reporting Commands](/en/keeperpam/commander-cli/command-reference/reporting-commands)

        * [Report Types](/en/keeperpam/commander-cli/command-reference/reporting-commands/report-types)

      * [Enterprise Management Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands)

        * [Creating and Inviting Users](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/creating-and-inviting-users)
        * [Compliance Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/compliance-commands)
        * [Breachwatch Commands](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/breachwatch-commands)
        * [SCIM Push Configuration](/en/keeperpam/commander-cli/command-reference/enterprise-management-commands/scim-push-configuration)

      * [Record Commands](/en/keeperpam/commander-cli/command-reference/record-commands)

        * [Record Type Commands](/en/keeperpam/commander-cli/command-reference/record-commands/record-type-commands)
        * [Creating Record Types](/en/keeperpam/commander-cli/command-reference/record-commands/default-record-types)

      * [Sharing Commands](/en/keeperpam/commander-cli/command-reference/sharing-commands)
      * [KeeperPAM Commands](/en/keeperpam/commander-cli/command-reference/keeperpam-commands)
      * [Connection Commands](/en/keeperpam/commander-cli/command-reference/connection-commands)

        * [SSH](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh)
        * [SSH Agent](/en/keeperpam/commander-cli/command-reference/connection-commands/ssh-agent)
        * [RDP](/en/keeperpam/commander-cli/command-reference/connection-commands/rdp)
        * [Connect Command](/en/keeperpam/commander-cli/command-reference/connection-commands/connection-to-hosts)
        * [SFTP Sync](/en/keeperpam/commander-cli/command-reference/connection-commands/sftp-sync)

      * [Secrets Manager Commands](/en/keeperpam/commander-cli/command-reference/secrets-manager-commands)
      * [MSP Management Commands](/en/keeperpam/commander-cli/command-reference/msp-management-commands)
      * [Miscellaneous Commands](/en/keeperpam/commander-cli/command-reference/misc-commands)
      * [Password Rotation](/en/keeperpam/commander-cli/command-reference/plugins)

        * [Password Rotation Commands](/en/keeperpam/commander-cli/command-reference/plugins/password-rotation)
        * [AWS Plugin](/en/keeperpam/commander-cli/command-reference/plugins/aws-plugin)
        * [Azure Plugin](/en/keeperpam/commander-cli/command-reference/plugins/azure-plugin)
        * [Microsoft SQL Server Plugin](/en/keeperpam/commander-cli/command-reference/plugins/microsoft-sql-server-plugin)
        * [MySQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/mysql-plugin)
        * [Oracle Plugin](/en/keeperpam/commander-cli/command-reference/plugins/oracle-plugin)
        * [PostgreSQL Plugin](/en/keeperpam/commander-cli/command-reference/plugins/postgresql-plugin)
        * [PSPasswd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/pspasswd-plugin)
        * [SSH Plugin](/en/keeperpam/commander-cli/command-reference/plugins/ssh-plugin)
        * [Unix Passwd Plugin](/en/keeperpam/commander-cli/command-reference/plugins/unix-passwd-plugin)
        * [Windows Plugin](/en/keeperpam/commander-cli/command-reference/plugins/windows-plugin)
        * [Active Directory Plugin](/en/keeperpam/commander-cli/command-reference/plugins/active-directory-plugin)
        * [Automatic Execution](/en/keeperpam/commander-cli/command-reference/plugins/automatic-execution)

    * [Service Mode REST API](/en/keeperpam/commander-cli/service-mode-rest-api)
    * [Troubleshooting](/en/keeperpam/commander-cli/troubleshooting-commander-cli)

[Powered by
GitBook](https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=-MJXOXEifAmpyvNVL1to)

On this page

  * Features
  * Prerequisites
  * Installation
  * Install Keeper Ansible Module
  * Generate a Config File
  * Ansible Variables
  * Command Line Variables
  * Ansible Plugin Usage
  * Plugin: keeper_cache_records
  * Plugin: keeper_copy
  * Plugin: keeper_get
  * Plugin: keeper_get_record
  * Plugin: keeper_set
  * Plugin: keeper_create
  * Plugin: keeper_remove
  * Plugin: keeper_password
  * Plugin: keeper_lookup
  * Plugin: keeper_init
  * Plugin: keeper_info
  * Plugin: keeper_cleanup
  * Plugin: keeper_redact
  * Ansible Vault Password Retrieval
  * Logging
  * Troubleshooting
  * __NSPlaceholderDate in progress in another thread when fork() called error.
  * Missing Configuration file

Was this helpful?

[Export as
PDF](/en/keeperpam/~gitbook/pdf?page=-Mb8EplHSWmubOCYOX0_&only=yes&limit=100)

  1. [Secrets Manager](/en/keeperpam/secrets-manager)
  2. [Integrations](/en/keeperpam/secrets-manager/integrations)
  3. [Ansible](/en/keeperpam/secrets-manager/integrations/ansible)

# Ansible Plugin

A collection of Ansible plugins that interact with your Keeper account and can
be used in your automations.

[PreviousAnsible](/en/keeperpam/secrets-
manager/integrations/ansible)[NextAnsible Tower](/en/keeperpam/secrets-
manager/integrations/ansible/ansible-tower)

Last updated 3 months ago

Was this helpful?

#### Company

  * [Keeper Home](https://www.keepersecurity.com/)
  * [About Us](https://www.keepersecurity.com/about.html)
  * [Careers](https://www.keepersecurity.com/jobs.html)
  * [Security](https://www.keepersecurity.com/security.html)

#### Support

  * [Help Center](https://www.keepersecurity.com/support.html)
  * [Contact Sales](https://www.keepersecurity.com/contact.html?t=b&r=sales)
  * [System Status](https://statuspage.keeper.io/)
  * [Terms of Use](https://www.keepersecurity.com/termsofuse.html)

#### Solutions

  * [Enterprise Password Management](https://www.keepersecurity.com/enterprise.html)
  * [Business Password Management](https://www.keepersecurity.com/business.html)
  * [Privileged Access Management](https://www.keepersecurity.com/privileged-access-management/)
  * [Public Sector](https://www.keepersecurity.com/government-cloud/)

#### Pricing

  * [Business and Enterprise](https://www.keepersecurity.com/pricing/business-and-enterprise.html)
  * [Personal and Family](https://www.keepersecurity.com/pricing/personal-and-family.html)
  * [Student](https://www.keepersecurity.com/student-discount-50off.html)
  * [Military and Medical](https://www.keepersecurity.com/id-me-verification.html)

© 2025 Keeper Security, Inc.

##

Features

  * Retrieve secrets from the Keeper vault to use in Ansible Playbooks

  * Update the value of secrets in the Keeper Vault from Ansible

  * Create records from Ansible

  * Copy files from the Keeper Vault

##

Prerequisites

This page documents the Secrets Manager Ansible integration. In order to
utilize this integration, you will need:

  *     * Secrets Manager add-on enabled for your Keeper account

    * Membership in a Role with the Secrets Manager enforcement policy enabled

  *     *   *     * The Ansible integration accepts both Base64 and JSON format configurations

##

Installation

Due to the flexibility of Ansible, where you install the plugins depends on
your Ansible installation and playbook locations.

###

Install Keeper Ansible Module

####

Installation via Ansible Galaxy

Copy

    
    
    $ ansible-galaxy collection install keepersecurity.keeper_secrets_manager

Ansible Galaxy collection uses long plugin names. The name is the collection
name combined with the plugin name. For example, the `keeper_copy` plugin name
when using Ansible Galaxy is
`keeper_security.keeper_secrets_manager.keeper_copy` _._ If you want to use
the short plugin name, add `keepersecurity.keeper_secrets_manager` to the
`collections` block of your playbook.

Copy

    
    
    - name: Keeper Copy
      hosts: my_hosts
      collections: 
        - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Copy a password
          keeper_copy:
            uid: RECORD UID
            ...

Installing via Ansible Galaxy assumes you already have Ansible installed.
Ansible Galaxy cannot install dependencies. The following dependencies will
need to be installed manually, via pip, into your the python library or
virtualenv used by Ansible.

  * importlib_metadata

  * keeper-secrets-manager-core>=16.4.1 

  * keeper-secrets-manager-helper>=1.0.4

####

Installation via Pypi

The Ansible module for Keeper is installed with the command below. Make note
of the location where the module is installed, as this will be needed in the
Ansible playbook configuration.

Copy

    
    
    $ pip3 install -U keeper_secrets_manager_ansible

The Keeper ansible plugins are installed in the site-packages directory of
your version of Python or your current virtual environment. You can find the
plugin locations using the following command:

Copy

    
    
    $ keeper_ansible --config
    
    # Below are the directory paths to action and lookup plugins.
    ANSIBLE_ACTION_PLUGINS=...site-packages/keeper_secrets_manager_ansible/plugins/action_plugins
    ANSIBLE_LOOKUP_PLUGINS=...site-packages/keeper_secrets_manager_ansible/plugins/lookup_plugins

Those paths can be used in your _ansible.cfg._

Copy

    
    
    [defaults]
    action_plugins = ...site-packages/keeper_secrets_manager_ansible/plugins/action_plugins
    lookup_plugins = ...site-packages/keeper_secrets_manager_ansible/plugins/lookup_plugins

###

Generate a Config File

  *   * 

Using the Keeper Ansible module and the generated One-Time Access Token,
generate a Configuration file:

Copy

    
    
    $ keeper_ansible --token XX:XXXXXX
    Config file create at location client-config.json

This will generate the Keeper JSON configuration file in the current
directory.

If you do not have your Python module bin path added your **PATH** environment
variable, you can create a config with the following command.

Copy

    
    
    $ python3 -m keeper_secrets_manager_ansible --token XX:XXXXXX
    Config file create at location client-config.json

The default name for the JSON configuration file is client-config.json. The
content of the file will look like the following:

Copy

    
    
    {
        "appKey" : "XXXXXXXX",
        "appOwnerPublicKey": "XXXXXXX",
        "clientId": "XXXXXXXX",
        "hostname": "XXXXX",
        "privateKey": "XXXXXXXX",
        "serverPublicKeyId": "XX"
    }
    

This config file allows your Ansible playbook to authenticate and retrieve
designated secrets from the vault.

###

Ansible Variables

The Keeper Secrets Manager plugins can use multiple configuration methods. For
example, the Base64 encode configuration can be used.

Copy

    
    
    ---
    keeper_config: U09NRVRFc2R ... GFzZGFzZGFzZHNhWFQK==

Ansible can use the client-config.json config file directly. It can be
specified in the Ansible variables using the keeper_config_file variable key.

Copy

    
    
    ---
    keeper_config_file: /path/to/client-config.json

Another solution is to place the values in your client-config.json file into
an Ansible variable file. For example, the values can be placed into the
_group_vars, host_vars, or in the task files:_

Copy

    
    
    ---
    keeper_app_key: XXXXX
    keeper_client_id: XXXXX
    keeper_token: XXXXX
    keeper_private_key: XXXXX
    keeper_app_owner_public_key: XXXXX
    keeper_server_public_key_id: XX

For security, the _group_vars_ or _host_vars_ files can be encrypted with
ansible-vault.

A list of valid Ansible Variables for the Keeper plugin are below:

Ansible Variable

JSON Key

Description

keeper_config

\--

A Base64 encoded configuration string.

keeper_config_file

\--

An alternative path and name for the JSON configuration file, if not current
directory or named differently than _client-config.json_.

keeper_token

clientKey

The one time access token, also known as the client key. Only used to
initialize the configuration.

keeper_client_id

clientId

The client id provided from Secrets Manager after the one time access token is
used. Required.

keeper_app_key

appKey

The app key provided from the secret management service after the one time
access token is used. Required.

keeper_private_key

privateKey

The private key provided from the secret management service after the one time
access token is used. Required.

keeper_app_owner_public_key

appOwnerPublicKey

The public key used for creating records. Required if using the
`keeper_create` plugin.

keeper_server_public_key_id

serverPublicKeyId

Selects which public key to use when connecting to the server. If the server
wants a different public key the SDK will handle switching. Not required, but
will reduce number of web service calls.

keeper_hostname

hostname

The Secrets Manager backend hostname. Defaults to US. Supports "US", "EU",
"AU" and "US_GOV" values depending on your Keeper data center location.
Required.

keeper_log_level

\--

Set the log level of the SDK. Acceptable levels are DEBUG, INFO, WARNING,
ERROR, and CRITICAL. Defaults to ERROR.

keeper_record_cache_secret

\--

Required for the `keeper_cache_records` action. Used to encrypt records in
cache. The value of this variable can be created in the playbook. See action
example.

keeper_use_cache

\--

Use a cache of the vault. Defaults to False. Cache file are only used as
backup for network problems.

keeper_cache_dir

\--

The directory to write and read the cache file.

keeper_record_types

\--

An list of Keeper Commander record type definitions.

There are two caching methods in the plugin. They are not the same.
`keeper_record_cache_secret` is used to cache records for a playbook run.
After the playbook run, the cache is removed. The cache is stored in memory
encrypted. This cache can be used to reduce the number of API called to the
Keeper Secret Manager service. Since this cache is stored in memory, the more
records retrieved the more memory is used. `keeper_use_cache` and
`keeper_cache_dir` are used for Disaster Recovery caching of the Keeper Vault.
This cached is used when connection to the Keeper Secret Manager service
cannot be reached. This cache is stored encrypted on disk.

###

**Command Line Variables**

As an optional method, values can be passed in through the `ansible-playbook`
command. Example:

Copy

    
    
    $ ansible-playbook my_playbook.yml \
        -e "keeper_app_key=XXXXX" \
        -e "keeper_client_id=XXXXX" \
        -e "keeper_token=XXXXX" \
        -e "keeper_private_key=XXXXX"

##

Ansible Plugin Usage

There are three Keeper action plugins and one lookup plugin.

For all the plugins, the following arguments are used. Either the `uid` or
`title` is required.

  * `uid` \- The Record UID of the desired record.

  * `title` \- The Record Title of the desired record.

  * `field` \- Retrieve the value with specified label from the record.

  * `custom_field` \- Retrieve the value with the specific custom field name.

  * `file` \- Retrieve the file with the specified name from the record.

The `uid` value is required, and you need either `field` or `file` populated.

The plugin example are shown with the short plugin names. If you installed the
collection via Ansible Galaxy, you will need to use the longer plugin name or
add the collection name to the list of collections used in your playbook.

For example, a complex value like Phone number is an array of objects.

Copy

    
    
    [
        {
            'number': '(555) 123-1234', 
            'type': 'Work', 
            'ext': '11'
        }, 
        {
            'region': 'AD', 
            'number': '111-2223333', 
            'ext': '5555', 
            'type': 'Mobile'
        }
    ]

The example, below is show how to use **Keeper Notation** and `array_index`
and `value_key` to get the same result.

Copy

    
    
    ---
    - name: Keeper Get
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Get the second phone number using Keeper Notation
          keeper_get:
            notation: "RECORD UID/field/phone[1][number]"
          register: second_number_notation
          
        - name: Get the second phone number using array_index and value_key
          keeper_get:
            uid: "RECORD UID"
            field: phone
            array_index: 1
            value_key: "number"
          register: second_number_non_notation

###

Plugin: keeper_cache_records

The plugin `keeper_cache_records` is used to retrieve a select amount of
records to be stored in a cache. The cache can then be used by other actions.
This is used to reduce the number of API calls by getting all required record
up front.

Copy

    
    
    ---
    - name: Cache records
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Generate a Keeper Record Cache secret
          keeper_password:
            length: 64
          register: keeper_record_cache_secret
          no_log: True
    
        - name: Store the Keeper Record Cache secret into variables.
          set_fact:
            keeper_record_cache_secret: "{{ keeper_record_cache_secret.password }}"
          no_log: True
          
        - name: Cache records. Will use keeper_record_cache_secret from above.
          keeper_cache_records:
            uids:
              - RECORD UID
              - RECORD UID
            titles:
              - My Record Title
              - My Record Title Too
          register: my_records
          no_log: True
            
        - name: Copy a file
          keeper_copy:
            cache: "{{ my_records.cache }}"
            uid: RECORD UID
            file: my_cert_file.crt
            dest: /etc/special.crt
            owner: root
            group: root
            mode: "0644"
            backup: yes

The records can be retrieved by the record UID or by the record title. The
result of the action is an encrypted serialization of the records. The result
should be stored in Ansible by using the register variable so it can be used
by other actions. The encrypted serialization of the records can be quite
long. For security and reducing log noise, it is recommended to set `no_log`
to **True**.

`keeper_cache_records` caches records only. It does not cache attached files.
If an action attempts to retrieve an attached file from a record that came
from the cache, an API call will be made to download the file.

Use templating to set the attributes in other actions. For example `cache: "{{
my_records.cache }}"`

`keeper_cache_records` requires the `keeper_record_cache_secret` to be set.
This can be done in the host, group, task variables, or generated in a task
and then set as a fact (variable). In the example above, the `keeper_password`
action is used to generate a password which is then stored as
`keeper_record_cache_secret`. The `no_log` attribute is set to True to prevent
the secret from being logged.

The cache will not update. The cache will not contain records created or
updated after it has been generated. To get new records or changes in the
cache, `keeper_cache_records` will need to be called again.

####

Required Attributes

  * `uids` \- A list of Keeper Vault record UID. 

  * `titles` \- A list of titles of Keeper Vault records.

The attributes `uids` and `titles` can be used at the same time. At least one
of them needs to be set.

###

Plugin: `keeper_copy`

Copy

    
    
    ---
    - name: Keeper Copy
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Copy a password.
          keeper_copy:
            uid: RECORD UID
            field: password
            dest: /tmp/my_password
            mode: "0600"
    
        - name: Copy a file
          keeper_copy:
            uid: RECORD UID
            file: my_cert_file.crt
            dest: /etc/special.crt
            owner: root
            group: root
            mode: "0644"
            backup: yes

In the examples, a password will be copied from the Keeper vault record and
stored in the file `/tmp/my_password` on the remote system. It will use the
Ansbile built-in copy plugin's mode attributes to changed the permissions of
the file.

The last task example from above, the file "_my_cert_file.crt_ " will be coped
from the Keeper vault record and stored at the location "_/tmp/special.crt"_.
Several of the built-in copy plugin functions will be applied to the file.

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

  * `notation` \- Use Keeper Notation to get the field from a record.

The attributes `uids` and `titles` can be used at the same time. At least one
of them needs to be set.

####

Optional Attributes

  * `cache` \- The record cache from the `keeper_cache_records` action.

  * `field` \- Get the content from the standard Keeper Vault record. 

  * `custom_field` \- Get the content from the custom Keeper Vault record.

  * `file` \- Get the content from the files attach to the Keeper Vault record by file title.

  * `array_index` \- Defaults to 0. If the field value contains multiple values, this attribute will allow you to select which item to return. The first item will have the `array_index` of **0** , and the next will be **1** , etc.

  * `value_key` \- If the field value is a complex object, this will allow you to select the key of the key/value pair to return.

###

Plugin: `keeper_get`

The plugin `keeper_get` will retrieve a field or file from a Keeper vault
record. Example:

Copy

    
    
    ---
    - name: Keeper Get
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Get login name. Loading record from Keeper Vault.
          keeper_get:
            uid: RECORD UID
            field: login
          register: my_login
          
        - name: Print login name
          debug:
            var: my_login.value
            verbosity: 0
            
        - name: Make a sudoer
          copy:
            dest: "/etc/sudoers.d/{{ my_login.value }}"
            content: |
              # Auto added by Ansible
              {{ my_login.value }} ALL=(ALL:ALL) ALL

The `keeper_get` plugin returns a dictionary. The key "value" in the
dictionary will contain the desired field or file content. This plugin is
normally paired with the Ansible `register` instruction and the returned value
is stored in memory so it can be accessed by other tasks.

In the example above, a record containing user's login name is retrieved. The
login name is then stored under the name my_login. The second task will print
the login name to your console for debug purposes. The third task will add a
sudoer file for the login name with ability to execute all applications.

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

  * `notation` \- Use Keeper Notation to get the field from a record.

The attributes `uids` and `titles` can be used at the same time. At least one
of them needs to be set.

####

Optional Attributes

  * `cache` \- The record cache from the `keeper_cache_records` action.

  * `field` \- Get the value from the standard Keeper Vault record. 

  * `custom_field` \- Get the value from the custom Keeper Vault record.

  * `file` \- Get the value from the files attach to the Keeper Vault record by file title.

  * `allow_array` \- By default is **False**. If set to **True** , an array of values will be returned. This is needed if the field contains multiple values such as Phone numbers. If **True** , `array_index` and `value_key` will be ignored.

  * `array_index` \- Defaults to 0. If the field value contains multiple values, this attribute will allow you to select which item to return. The first item will have the `array_index` of 0, and the next will be 1, etc.

  * `value_key` \- If the field value is a complex object, this will allow you to select the key of the key/value pair to return.

###

Plugin: `keeper_get_record`

The plugin `keeper_get_record` will retrieve all the fields in the record and
return them in a dictionary. Example:

Copy

    
    
    ---
    - name: Keeper Get Record
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Get a record from the vault.
          keeper_get_record:
            uid: RECORD UID
            allow:
              - login
              - password
          register: my_record
          
        - name: Print login name
          debug:
            var: my_record.record.login[0]
            verbosity: 0

The `keeper_get_record` plugin returns a dictionary. The keys of the
dictionary are the normalized field labels, or types. The keys will be
alphanumeric and the underscore characters. If there are duplicate key, a
number will be appended to the end of the key.

In the example above, a record is retrieved using the UID. The fields will be
stored in a dictionary, in memory, using the `register` instruction. Since the
`allow` attribute is used, the dictionary will only contain **login** and
**password** .The field values can be accessed using the normal the templating
in Ansible. The values will be stored as arrays. This is due to some fields
returning arrays of the values, such as `phone`.

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

Either `uids` and `titles` is required.

####

Optional Attributes

  * `cache` \- The record cache from the `keeper_cache_records` action.

  * `allow` \- A list of keys to allow. If set, if the key is not in the list, it will not be inclued in the dictionary.

###

Plugin: `keeper_set`

The `keeper_set` plugin has the ability to write a value into an existing
Keeper vault record. Example:

Copy

    
    
    ___
    - name: Keeper Set
      hosts: my_hosts
      # Include line below if installed via ansible galaxy or use long plugin names.
      # collections: 
      #   - keepersecurity.keeper_secrets_manager
      
      tasks:
        - name: Get login name of new user.
          keeper_get:
            uid: RECORD UID
            field: login
          register: my_login
          
        - name: Add new user of remote machine.
          user:
            name: "{{ my_login.value }}"
            comment: "User {{ my_login.value }}"
          register: new_user
            
        - name: Update record with user's home directory in the Keeper Vault
          keeper_set:
            uid: RECORD UID
            custom_field: my_home_directory
            value: "{{ new_user.home }}"

In this example, a new user's login name is retreived. The new user is created
on the remote system with the login name from the record. The home directory
on the remote machine is then updated in the record.

The `keeper_set` action does not have the ability of set individual values of
an array or complex values. It simplely replaces the existing value with a new
value. For example, for a**Hostname and Port** field type there is no way to
just update the port. The entire value including the **hostName** needs to be
included in the object value.

`keeper_set` will set the update the record in the vault. It will not update
the cache, if used. To update the cache, a step will need to run the
`keeper_cache_records` action again with the **UID** or **Title** of the
record that was updated.

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

  * `notation` \- Use Keeper Notation to get the field from a record.

The attributes `uids` and `titles` can be used at the same time. At least one
of them needs to be set.

####

Optional Attributes

  * `cache` \- The record cache. Used for getting the record, will not update the cache.

  * `field` \- Update the existing standard Keeper Vault record field.

  * `custom_field` \- Update the existing custom Keeper Vault record field.

###

Plugin: `keeper_create`

The Ansible variable `keeper_app_owner_public_key` is required to create a
record. In the client-config.json, the JSON key is `appOwnerPublicKey. `If
your configuration does not contain this key, create a new One-Time Access
Token and initialize it.

Example:

Copy

    
    
    ---
    - name: Keeper Create
      hosts: my_hosts
      
      tasks:
        - name: "Create A Record"
          keeper_create:
            shared_folder_uid: XXXXXX
            record_type: login
            generate_password: True
            password_complexity:
              length: 64
              allow_symbols: False
            title: "My New Record"
            note: "Created by Ansible"
            fields:
              - type: login
                value: johndoe@localhost
              - type: url
                value: https://localhost
            custom_fields:
              - type: text
                label: "My Custom Label"
                value: "My custom value"
          register: my_new_record
    
        - name: "New Record UID"
          debug:
            msg: "New record uid is {{ my_new_record.record_uid }}"

The following fields are required.

  * `shared_folder_uid` \- The Shared Folder UID from the vault. The record will be created within this folder.

  * `record_type` \- The type of record. This will included all the default record types. If the `keeper_record_types` is set, those record types can be used.

  * `title` \- The title of record

The following fields are optional.

  * `generate_password` \- If set to true, any password field where the password has not been set, will be populated with a random generated password.

  * `password_complexity` \- Sets the complexity of the password. All parameters of password_complexity are optional.

    * `length` \- Length of password. Defaults to **64**.

    * `allow_lowercase` \- Defaults to **True**. If set to **False** , no lowercase letters will be used.

    * `allow_uppercase` \- Defaults to **True**. If set to **False** , no uppercase letters will be used.

    * `allow_digits` \- Defaults to **True**. If set to **False** , no digits will be used.

    * `allow_symbols` \- Defaults to True. If set to **False** , no symbols will be used.

    * `filter_characters` \- A list of characters to exclude from the password. This allows to remove characters a services will reject. For example, '%' in SQL. If not set, the password will not be filtered.

  * `notes` \- Attach a note to the record.

Password generation will use the following symbols: "!@#$%()+;<>=?[]{}^.,

Based on the Record Types, certain fields maybe required. Custom fields are
optional. Both `fields` and `custom_fields` are an array of values.

  * `fields/custom_fields`

    * `type` \- Field type

    * `label` \- Label to display with the value.

    * `value` \- Field value. Can be a string or dictionary based on field type.

####

Creating Custom Record Types

To create a record with a particular Custom Record Type, first export the
custom record types using Keeper Commander and the `record-type-info` command.
KSM does not sync down the custom type definitions, so this must be added
directly to the playbook as a variable.

Keeper Commander will output a JSON Array ("content"). Only the JSON object is
required.

Example:

Copy

    
    
    My Vault> record-type-info --format json -lr "My Custom"
    [
      {
        "recordTypeId": 18,
        "content": "{\"$id\":\"My Custom\",\"categories\":[\"login\"],
          \"description\":\"SSH key template\",\"fields\":[
            {\"$ref\":\"login\"},
            {\"$ref\":\"keyPair\"},
            {\"$ref\":\"password\",\"label\":\"passphrase\"},
            {\"$ref\":\"host\"},
            {\"$ref\":\"fileRef\"}]}"
      }
    ]

In your Ansible YAML file, add the value of the "content" object to the
variable key called `keeper_record_types`. The variable is an array, and the
JSON is to be treated as a string value. The pipe, after the array item, will
treat the following JSON as a string. The variable will accept multiple record
types.

Example:

Copy

    
    
    - name: My Playbook
      collections:
       - keepersecurity.keeper_secrets_manager
      hosts: "my_hosts"
      vars:
        keeper_record_types:
          - |
            {
              "recordTypeId": 35,
              "content": "{\"$id\":\"My Custom\",\"fields\":[{\"$ref\":\"fileRef\",\"label\":\"File or Photo\"},{\"$ref\":\"login\",\"label\":\"Login\"},{\"$ref\":\"password\",\"label\":\"Password\",\"required\":true,\"enforceGeneration\":false,\"privacyScreen\":false,\"complexity\":{\"length\":8,\"caps\":0,\"lowercase\":0,\"digits\":0,\"special\":0}},{\"$ref\":\"text\",\"label\":\"System Login\",\"required\":true},{\"$ref\":\"secret\",\"label\":\"System Password / Pin Code\"},{\"$ref\":\"url\",\"label\":\"Keeper VPN Wiki\",\"required\":true},{\"$ref\":\"url\",\"label\":\"Password Best Practices FAQ's and Tips\",\"required\":true}]}"
            }

To check if this worked, the `keeper_info` plugin can be used to show which
record types are available.

When creating a record of a particular custom type, the Ansible task will
reference the record type name in the `record_type` parameter as seen below:

Copy

    
    
    - name: "Create A Custom Record"
          keeper_create:
            shared_folder_uid: XXXXXXXXXXXX
            record_type: "My Custom"
            title: "Example Custom Record"
            note: "Created by Ansible"
            fields:
              - type: login
                label: Login
                value: johndoe@localhost
              - type: password
                label: Password
                value: "ABC123"
          register: my_new_record

###

Plugin: `keeper_remove`

v1.2.1 Released on: 10/27/2023

The keeper_remove plugin will remove a record from the Keeper vault.

Copy

    
    
    ---
    - name: Keeper Remove
      hosts: my_hosts
      
      tasks:
        - name: Remove by UID
          keeper_remove:
            uid: RECORD UID
            
        - name: Remove by Title
          keeper_remove:
            title: RECORD TITLE
         

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

The attributes `uid` and `title` cannot be used at the same time. At least one
of them needs to be set.

####

Optional Attributes

  * `cache` \- The record cache from the `keeper_cache_records` action. The record will not be removed from the cache. The cache will be used for looking up the record title.

###

Plugin: `keeper_password`

The `keeper_password` plugin will generate a random password. The action
plugin will return the `password`.

Example:

Copy

    
    
    ---
    - name: Keeper Password
      hosts: my_hosts
      
      tasks:
        - name: Generate a long password
          keeper_password:
            length: 128
          register: long_password
        - name: Show long password
          debug:
            msg: "Long password {{ long_password.password }}"
            
        - name: Generate an all digit password
          keeper_password:
            length: 32
            allow_lowercase: False
            allow_uppercase: False
            allow_symbols: False
          register: digit_password
        - name: Show digit password
          debug:
            msg: "Digit password {{ digit_password.password }}"
            
        - name: Generate a PostgreSQL password (no % character)
          keeper_password:
            length: 64
            filter_characters: 
              - "%"
          register: pg_password
        - name: Show PostgreSQL password
          debug:
            msg: "PG password {{ pg_password.password }}"    

All parameters are optional. If no parameters are set, the defaults will be
used.

  * `length` \- Length of password. Defaults to **64**.

  * `allow_lowercase` \- Defaults to **True**. If set to **False** , no lowercase letters will be used.

  * `allow_uppercase` \- Defaults to **True**. If set to **False** , no uppercase letters will be used.

  * `allow_digits` \- Defaults to **True**. If set to **False** , no digits will be used.

  * `allow_symbols` \- Defaults to True. If set to **False** , no symbols will be used.

  * `filter_characters` \- A list of characters to exclude from the password. This allows to remove characters a services will reject. For example, '%' in SQL. If not set, the password will not be filtered.

Password generation will use the following symbols: "!@#$%()+;<>=?[]{}^.,

Based of record types, certain fields maybe required. Custom fields are
optional. Both fields and custom_field are an array of values.

###

Plugin: `keeper_lookup`

The `keeper_lookup` plugin retrieves a field from the Keeper vault record and
inserts the value into a text string. Example:

Copy

    
    
    ---
    - name: Keeper Lookup
      hosts: my_hosts
      
      tasks:
        - name: Write login to file. Get record from the Keeper Vault
          copy:
            content: "My login is {{ lookup('keeper', uid='RECORD UID', field='login') }}"
            dest: "/tmp/my_login.txt"
          no_log: True
          
        - name: Using the array_index and value_key on complex values
          debug:
            msg: >-
              Second phone number is 
              {{ lookup('keeper', uid='RECORD UID', custom_field='My Phone', array_index=1, value_key='number') }}
     

In the example above, the first task the content of a file is created by
templating the login name of a user from a Keeper record.

The second task displays as debug the second phone of number from a field with
a complex value using the `array_index` and `value_key` task attributes. An
`array_index` starts at 0, the next item in the araray will be 1, the next is
2, a so on. The `value_key` is the name of key in a key/pair dictionary.

####

Required Attributes

  * `uid` \- A Keeper Vault record UID.

  * `title` \- Title of a Keeper Vault records.

  * `notation` \- Use Keeper Notation to get the field from a record.

The attributes `uids` and `titles` can be used at the same time. At least one
of them needs to be set.

####

Optional Attributes

  * `cache` \- The record cache. Used for getting multiple records, will not update the cache.

  * `field` \- Update the existing standard Keeper Vault record field.

  * `custom_field` \- Update the existing custom Keeper Vault record field.

  * `file` \- Get the value from the files attach to the Keeper Vault record by file title.

  * `allow_array` \- By default is **False**. If set to **True** , an array of values will be returned. This is needed if the field contains multiple values such as Phone numbers. If **True** , `array_index` and `value_key` will be ignored.

  * `array_index` \- Defaults to 0. If the field value contains multiple values, this attribute will allow you to select which item to return. The first item will have the `array_index` of 0, and the next will be 1, etc.

  * `value_key` \- If the field value is a complex object, this will allow you to select the key of the key/value pair to return.

####

Important Notes

  * To avoid leaking secret values when using the lookup plugin, add `'no_log: True'` to the task. The stdout information will not be logged if the value is True.

  * If the plugin was installed by Ansible Galaxy the longer name is required for the lookup plugin (i.e. keepersecurity.keeper_secrets_manager.keeper). Listing collections appears not to work with lookup plugins.

  * 

###

Plugin: `keeper_init`

The `keeper_init` plugin initialize a configuration from a one time access
token. This is similar to the __`keeper_ansible --keeper_token` command. The
plugin accepts the following options.

  * `token` \- The one time access token. It's best to template this value and pass in the value.

  * `filename` \- The configuration file name to generate with config values. If not included, the configuration will not be created.

  * `show_config` \- A flag to indicate if the configuration values should be returned in the task log. By default this is `False`. Only set to True if you are unable to generate the configuration via other methods or do not have access to a generated configuration file. If True, the configuration will be logged. This might not be a problem if running the playbook via the command line, however if running via Ansible Tower to will be log file which is retained.

Copy

    
    
    ---
    - name: Keeper Lookup
      hosts: localhost
      connection: local
      
      tasks:
        - name: Init the one time access token
          keeper_init:
            token: "{{ keeper_token }}"
            filename: "{{ keeper_config_file }}"
            show_config: False

It's best not to hard code the token into the playbook since it's only good
once. The token and the configuration file name can be passed into the
playbook using the `extra vars`.

Copy

    
    
    $ ansible-playbook my_init_playbook.yml \
      -e "keeper_token=US:XXX" \
      -e "keeper_config_file=my_keeper_config.yml"

The above will generate a file similar to the one below. The content of the
file can be copied into a configuration file used by ansible, and optionally
encrypted by `ansible-vault`.

Copy

    
    
    keeper_app_key: +U5Ja ... 5FmXymVI=
    keeper_client_id: Fokc ... WBdUPxPlBwzAKlMUgFZHqLg==
    keeper_hostname: US
    keeper_private_key: MIGHA ... yA7Oy
    keeper_server_public_key_id: '10'

####

Ansible Galaxy Role

If the Keeper Secret Manager plugins were installed via Ansible Galaxy, a role
called `keeper_init_token` was installed to initialize the one-time access
token. This role can be used in a playbook.

Copy

    
    
    ---
    - name: Initialize One Time Access Token
      hosts: localhost
      connection: local
      collections: keepersecurity.keeper_secrets_manager
    
      roles:
        - keeper_init_token

The role will use the following options set via extra variables.

  * `keeper_token` \- Required one-time access token.

  * `keeper_config_file` \- Generate a file containing the configuration. If not set, no file will be created.

  * `keeper_show_config` _= Default False. If set to True, it will show the config in the log if verbosity is enabled._

Either `keeper_config_file` or `keeper_show_config` should be used, else the
token will initialize and you will not be able to view the resulting
configuration.

###

Plugin: keeper_info

The keeper_info action will display information about the Keeper ansible
plugin. The results include a list of record types, field types, and versions
of Python modules. In order to see the results, the verbosity level needed to
be set at 1 or higher.

Copy

    
    
    ---
    - name: Keeper Info
      hosts: localhost
      connection: local
      
      tasks:
        - name: Display Keeper Info
          keeper_info:

This can be used to verify custom record types are being picked up by the
plugins.

###

Plugin: `keeper_cleanup`

The `keeper_cleanup` plugin is used to clean up any files created by the
keeper plugins. This is mainly used to delete a cache file, if you are using
it. Disaster Recovey cache files are used when there are network problems as a
fall back to get records. If you are running Ansible secret environment, there
is no need to remove the Disaster Recovey cache. However this plugin gives you
the ability to do so.

Copy

    
    
    - name: Keeper Lookup
      hosts: localhost
      connection: local
      vars:
        keeper_use_cache: True
      
      tasks:
        ... bunch of tasks
        
        - name: Remove the cache file
          keeper_cleanup:
        

###

Plugin: `keeper_redact`

The `keeper_redact` stdout callback plugin is used to redact secrets from the
standard out logs. This will work for the `keeper_redact` stdout callback
plugin is used to redact secrets from the standard out logs. This will work
for the `keeper_copy` and `keeper_get` plugins. It will not redact secret
values for `keeper_lookup`. For `keeper_lookup`, use the `no_log: True`
directive.

The `keeper_redact` plugin will not work with Ansible Tower since it had its
own stdout callback plugin to stream the log as the job runs. Highly recommend
using the `no_log` option when you do not wish show information in the log.

To use the `keeper_redact` plugin, enable it in your _ansible.cfg._

Copy

    
    
    [defaults]
    stdout_callback = keeper_redact
    # Use long name if install via Ansible Galaxy
    # stdout_callback = keepersecurity.keeper_secrets_manager.keeper_redact

For example, the following task would return all the phone numbers in the
custom field _MyPhoneNumbers_ and place them into the variable
_phone_numbers_.

Copy

    
    
        - name: "Get Phone Numbers"
          keeper_get:
            uid: OlLZ6JLjnyMOS3CiIPHBjw
            custom_field: MyPhoneNumbers
            allow_array: True
          register: phone_numbers

If the playbook was run with any verbosity, the values being placed into the
variable would be displayed. This would leak the secrets to the log. If the
`keeper_redact` stdout callback plugin is enabled, the values in the log would
be redacted.

Copy

    
    
    TASK [Get Phone Numbers] **************************************************
    ok: [my_server] => {
        "value": [
            {
                "number": "****",
                "type": "****",
                "ext": "****"
            },
            {
                "region": "****",
                "number": "****",
                "ext": "****",
                "type": "****"
            }
        ],
        "changed": false
    }

##

Ansible Vault Password Retrieval

You can use the Keeper Secret Manager CLI ("ksm") to provide the decryption
password for your Ansible vaults. This is done using the
ANSIBLE_VAULT_PASSWORD_FILE environment variable or the vault_password_file in
the ansible.cfg field to specify an executable file that will return a
password.

Copy

    
    
    #!/bin/sh
    ksm secret notation keeper://XXXX/field/password

Replace XXXX with the Vault Record UID. Running this script simply outputs the
secret password.

To override the environmental variable "ANSIBLE_VAULT_PASSWORD_FILE", execute
the following, replacing /path/to/script with the location of the above
script.

Copy

    
    
    $ ANSIBLE_VAULT_PASSWORD_FILE=/path/to/script.sh ansible-playbook playbook_with_vault.yml

Now, when Ansible needs to decrypt any vaults used by
`playbook_with_vault.yml`, it will execute that shell script. The shell script
will retrieve the password from the Keeper Vault.

##

Logging

By default, the Ansible plugins will only display errors. If you use the
Ansible verbosity level, different SDK logging will be displayed. An Ansible
verbosity level of `-v` will display any SDK messages INFO and higher, while a
verbosity level of `-vvv` will display any SDK messages DEBUG and higher.

##

Troubleshooting

###

__NSPlaceholderDate in progress in another thread when fork() called error.

This appears to be specific to Ansible running on MacOS. While running a
playbook you may get the following error:

Copy

    
    
    objc[6763]: +[__NSPlaceholderDate initialize] may have been in progress in 
    another thread when fork() was called. We cannot safely call it or ignore 
    it in the fork() child process. Crashing instead. Set a breakpoint on 
    objc_initializeAfterForkError to debug

This is known problem with Ansible. This can be fixed with the following
environmental variable.

Copy

    
    
    OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES ansible-playbook ...

###

Missing Configuration file

Copy

    
    
    TASK [Copy file from Keeper into the file] ********************************************************************************************
    An exception occurred during task execution. To see the full traceback, use -vvv. The error was: Exception: Keeper Ansible error: There is no config file and the Ansible variable contain no config keys. Will not be able to connect to the Keeper server.
    fatal: [localhost]: FAILED! => {"msg": "Unexpected failure during module execution.", "stdout": ""}

For a complete list of Keeper Secrets Manager features see the

Keeper Secrets Manager access (See the  for more details)

A Keeper  with secrets shared to it

See the  for instructions on creating an Application

An initialized Keeper

The collection can be found on the . You can install the collection with the
follow command line.

Find the Keeper Secrets Manager Ansible Plugin source code in the .

Prior to proceeding with this guide, make sure you meet all the  and have the
following:

KSM Application and it's

installed

In order to use the Ansible plugin for Keeper Secrets Manager, a  is required.
Once you have a config file, the configuration values can be placed into the
files. These variable files can be encrypted with Ansible vault.

To find out what fields and custom fields are available for a specific vault
secret, use the Keeper Secrets Manager CLI "`ksm secret get -u XXXX`" command.
More info .

Actions can either use  or the record UID or Title, combined with the task
attributes `array_index` and `value_key` to get a specific value.

The plugin `keeper_copy` is an extension of the _._ Example:

Additional optional attributes are the same as the  attributes. The attributes
`src, remote_src`, and `content` are not allowed and will be ignored.

The `keeper_create` plugin creates a record in the Keeper vault. See the
document for available record types, and the field types used to build the
records. The action plugin will return the `record_uid` upon successful
creation.

To find out what fields and custom fields are available for a specific vault
secret, use the Keeper Secrets Manager CLI "`ksm secret get -u XXXX`" command.
More info .

See  Using `no_log` can hide all logging from a task. This plugin is for when
you just want secrets returned by the Keeper Secrets Manager plugins to be
hidden/redacted.

A executable shell script can be created that returns the password using the
"ksm" secret notation ( about ksm secret notation). For example, the below
script will output a specific secret password for the given Record UID:

[Overview ](/en/keeperpam/secrets-manager/overview)

[Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide)

[Secrets Manager Configuration](/en/keeperpam/secrets-manager/about/secrets-
manager-configuration)

[Ansible Galaxy
website](https://galaxy.ansible.com/keepersecurity/keeper_secrets_manager)

[GitHub repository](https://github.com/Keeper-Security/secrets-
manager/tree/master/integration/keeper_secrets_manager_ansible)

[Keeper Notation](/en/keeperpam/secrets-manager/about/keeper-notation)

[built-in copy
plugin](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html)

[built-in copy
plugin](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html)

[Field/Record Types ](/en/keeperpam/secrets-manager/about/field-record-types)

[How do I keep secrets data in my
playbook?](https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#keep-
secret-data)

[Secrets Manager Application](/en/keeperpam/secrets-
manager/about/terminology#application)

[Quick Start Guide](/en/keeperpam/secrets-manager/quick-start-guide#2.-create-
an-application)

[One-Time Access Token](/en/keeperpam/secrets-manager/quick-start-
guide#create-a-secrets-manager-client-device-1)

[here](/en/keeperpam/secrets-manager/secrets-manager-command-line-
interface/secret-command#secret-command)

[here](/en/keeperpam/secrets-manager/secrets-manager-command-line-
interface/secret-command#secret-command)

[learn more](/en/keeperpam/secrets-manager/secrets-manager-command-line-
interface/secret-command#notation)

[prerequisites](/en/keeperpam/secrets-manager/integrations/ansible/ansible-
plugin#prerequisites)

[Keeper Ansible module](/en/keeperpam/secrets-
manager/integrations/ansible/ansible-plugin#install-keeper-ansible-module)

[Keeper config file](/en/keeperpam/secrets-manager/about/secrets-manager-
configuration)

[Ansible variable](/en/keeperpam/secrets-manager/integrations/ansible/ansible-
plugin#ansible-variables)

![](https://docs.keeper.io/~gitbook/image?url=https%3A%2F%2F762006384-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-
legacy-files%2Fo%2Fassets%252F-MJXOXEifAmpyvNVL1to%252F-MkdG-
_u0H2AJBEVfeYf%252F-MkdG4aCrzLanoVIXeNo%252Fansible-plugin-
header.jpg%3Falt%3Dmedia%26token%3D70c9a583-5939-48cc-990b-65c60094663a&width=768&dpr=4&quality=100&sign=e9ef641e&sv=2)

